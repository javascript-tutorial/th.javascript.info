## แปลงประเภทของข้อมูล

ส่วนใหญ่เวลาเราใช้ตัวดำเนินการ (operator) หรือฟังก์ชัน มันจะแปลงค่าให้เราอัตโนมัติ

ยกตัวอย่างเช่น `alert` จะแปลงค่าอะไรก็ตามให้เป็นสตริงเพื่อแสดงผล การคำนวณทางคณิตศาสตร์ก็จะแปลงค่าให้เป็นตัวเลข

แต่บางทีเราก็ต้องแปลงค่าด้วยตัวเองนะจ๊ะ

```smart header="ยังไม่พูดถึงออปเจ็กต์นะ"
ในบทนี้เราจะไม่พูดถึงออปเจ็กต์ก่อน เราจะพูดถึง primitive กันก่อน

เดี๋ยวเรียนเรื่องออปเจ็กต์เสร็จแล้ว ในบท <info:object-toprimitive> เราจะมาดูว่าออปเจ็กต์เข้ามาเกี่ยวข้องยังไง
```

## แปลงเป็นสตริง

การแปลงเป็นสตริงเกิดขึ้นเมื่อเราต้องการค่าในรูปแบบของสตริง

เช่น `alert(value)` จะแปลงค่าเพื่อแสดงผล

นอกจากนี้ เราสามารถใช้ฟังก์ชัน `String(value)` เพื่อแปลงค่าเป็นสตริงได้ด้วย:

```js run
let value = true;
alert(typeof value); // boolean

*!*
value = String(value); // ตอนนี้ value เป็นสตริง "true" แล้ว
alert(typeof value); // string
*/!*
```

การแปลงเป็นสตริงส่วนใหญ่ก็เห็นได้ชัดเจน `false` จะกลายเป็น `"false"`, `null` จะกลายเป็น `"null"`, เป็นต้น

## แปลงเป็นตัวเลข

การแปลงเป็นตัวเลขในฟังก์ชันและนิพจน์ทางคณิตศาสตร์เกิดขึ้นโดยอัตโนมัติ

เช่น เมื่อใช้เครื่องหมายหาร `/` กับค่าที่ไม่ใช่ตัวเลข:

```js run
alert( "6" / "2" ); // 3, สตริงถูกแปลงเป็นตัวเลข
```

เราสามารถใช้ฟังก์ชัน `Number(value)` เพื่อแปลง `value` เป็นตัวเลขอย่างชัดเจน:

```js run
let str = "123";
alert(typeof str); // string

let num = Number(str); // กลายเป็นตัวเลข 123

alert(typeof num); // number
```

การแปลงแบบชัดเจนมักจำเป็นเมื่อเราอ่านค่าจากแหล่งที่มาที่เป็นสตริง เช่น ฟอร์มข้อความ แต่คาดว่าจะใส่ตัวเลข

หากสตริงไม่ใช่ตัวเลขที่ถูกต้อง ผลลัพธ์ของการแปลงดังกล่าวจะเป็น `NaN` ตัวอย่างเช่น:

```js run
let age = Number("ข้อความสุ่มแทนที่จะเป็นตัวเลข");

alert(age); // NaN, การแปลงล้มเหลว
```

กฎการแปลงเป็นตัวเลข:

| ค่า | กลายเป็น... |
|-------|-------------|
|`undefined`|`NaN`|
|`null`|`0`|
|<code>true&nbsp;and&nbsp;false</code> | `1` และ `0` |
| `string` | เว้นวรรค (รวมถึงช่องว่าง แท็บ `\t` ตัวแบ่งบรรทัด `\n` เป็นต้น) จากจุดเริ่มต้นและจุดสิ้นสุดจะถูกลบออก หากสตริงที่เหลือว่าง ผลลัพธ์คือ `0` มิฉะนั้น ตัวเลขจะถูก "อ่าน" จากสตริง ข้อผิดพลาดจะให้ผลลัพธ์เป็น `NaN` |

ตัวอย่าง:

```js run
alert( Number("   123   ") ); // 123
alert( Number("123z") );      // NaN (ข้อผิดพลาดในการอ่านตัวเลขที่ "z")
alert( Number(true) );        // 1
alert( Number(false) );       // 0
```

โปรดทราบว่า `null` และ `undefined` มีพฤติกรรมที่แตกต่างกัน: `null` จะกลายเป็นศูนย์ ในขณะที่ `undefined` จะกลายเป็น `NaN`

ตัวดำเนินการทางคณิตศาสตร์ส่วนใหญ่ยังทำการแปลงดังกล่าวด้วย เราจะเห็นสิ่งนั้นในบทต่อไป

## แปลงเป็นบูลีน

การแปลงเป็น true/false เป็นเรื่องง่ายที่สุด

มันเกิดขึ้นในตัวดำเนินการตรรกะ (เดี๋ยวเราจะเจอการทดสอบเงื่อนไขและสิ่งอื่นๆ ที่คล้ายกัน) แต่ยังสามารถทำได้อย่างชัดเจนด้วยการเรียก `Boolean(value)`

กฎการแปลงเป็นบูลีน:

- ค่าที่ "ว่างเปล่า" เช่น `0`, สตริงว่าง, `null`, `undefined`, และ `NaN` จะกลายเป็น `false`.
- ค่าอื่นๆ จะกลายเป็น `true`.

ตัวอย่างเช่น:

```js run
alert( Boolean(1) ); // true
alert( Boolean(0) ); // false

alert( Boolean("สวัสดี") ); // true
alert( Boolean("") ); // false
```

````warn header="โปรดทราบ: สตริงที่มีศูนย์ `\"0\"` เป็น `true`"
บางภาษา (อย่างเช่น PHP) จะมองว่า `"0"` เป็น `false` แต่ใน JavaScript สตริงที่ไม่ว่างเปล่าจะกลายเป็น `true` เสมอ

```js run
alert( Boolean("0") ); // true
alert( Boolean(" ") ); // เว้นวรรค, ก็ยังเป็น true (สตริงที่ไม่ว่างเปล่าคือ true)
```
````

## บทสรุป

การแปลงไทป์ที่ใช้กันอย่างแพร่หลายมี 3 แบบ คือ แปลงเป็นสตริง แปลงเป็นตัวเลข และ แปลงเป็น true/false

**`การแปลงเป็นสตริง`** -- เกิดขึ้นเมื่อเราแสดงผลอะไรบางอย่าง สามารถทำได้ด้วย `String(value)` การแปลงเป็นสตริงสำหรับค่าพื้นฐานมักจะชัดเจน

**`การแปลงเป็นตัวเลข`** -- เกิดขึ้นในคำนวณทางคณิตศาสตร์ สามารถทำได้ด้วย `Number(value)`

การแปลงเป็นไปตามกฎดังนี้:

| ค่า | กลายเป็น... |
|-------|-------------|
|`undefined`|`NaN`|
|`null`|`0`|
|<code>true&nbsp;/&nbsp;false</code> | `1 / 0` |
| `string` | อ่านสตริงตามที่เป็น เว้นวรรค (รวมถึงช่องว่าง แท็บ `\t` ตัวแบ่งบรรทัด `\n` เป็นต้น) ทั้งสองข้างจะถูกละเว้น สตริงว่างเปล่าจะกลายเป็น `0` ข้อผิดพลาดจะให้ผลลัพธ์เป็น `NaN`. |

**`การแปลงเป็น true/false`** -- เกิดขึ้นในตัวดำเนินการตรรกะ สามารถทำได้ด้วย `Boolean(value)`

การแปลงเป็นไปตามกฎดังนี้:

| ค่า | กลายเป็น... |
|-------|-------------|
|`0`, `null`, `undefined`, `NaN`, `""` |`false`|
|ค่าอื่นๆ | `true` |


กฎเหล่านี้ส่วนใหญ่เข้าใจง่ายและจำง่าย ข้อยกเว้นที่สำคัญที่ผู้คนมักจะทำผิดพลาดคือ:

- `undefined` เป็น `NaN` เป็นตัวเลข ไม่ใช่ `0`
- `"0"` และสตริงที่มีเฉพาะช่องว่าง เช่น `"   "` เป็น true เป็นบูลีน

ออปเจ็กต์ไม่ได้ถูกกล่าวถึงในบทนี้ เราจะกลับมาดูเรื่องนี้ในบท <info:object-toprimitive> ซึ่งอุทิศให้กับออปเจ็กต์โดยเฉพาะหลังจากที่เราเรียนรู้สิ่งพื้นฐานเพิ่มเติมเกี่ยวกับ JavaScript
