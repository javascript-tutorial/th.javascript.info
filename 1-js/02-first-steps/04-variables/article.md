# ตัวแปร

ส่วนใหญ่แอปพลิเคชัน JavaScript จำเป็นต้องทำงานกับข้อมูล ต่อไปนี้เป็นตัวอย่างสองแอพที่เราคุ้นเคยกัน:
1. ร้านค้าออนไลน์ - ข้อมูลอาจจะรวมถึงสินค้าที่ขายและรถเข็นสินค้า
2. แอปพลิเคชันแชท - ข้อมูลอาจจะรวมถึงผู้ใช้ ข้อความ และอื่นๆอีกมากมาย

ตัวแปรจะถูกใช้เพื่อจัดเก็บข้อมูลนี้

## ตัวแปร

[ตัวแปร](https://en.wikipedia.org/wiki/Variable_(computer_science)) เป็น "ที่เก็บข้อมูลที่มีชื่อ" เราสามารถใช้ตัวแปรเพื่อเก็บสิ่งที่สนใจ, ผู้เยี่ยมชม, และข้อมูลอื่นๆ

การสร้างตัวแปรใน JavaScript, เราใช้คีย์เวิร์ด `let`

คำสั่งด้านล่างนี้สร้าง (หรือเรียกอีกอย่างหนึ่งว่า: *ประกาศ (declares)*) ตัวแปรที่มีชื่อว่า "message":

```js
let message;
```

ตอนนี้, เราสามารถใส่ข้อมูลลงไปในมันด้วยการใช้ตัวดำเนินการกำหนดค่า (assignment operator) `=`:

```js
let message;

*!*
message = 'สวัสดี'; // เก็บสตริง 'สวัสดี' ลงในตัวแปรที่ชื่อ message
*/!*
```

สตริงถูกบันทึกลงในพื้นที่หน่วยความจำที่เชื่อมโยงกับตัวแปร ที่เราสามารถเข้าถึงสตริงนี้ได้โดยใช้ชื่อตัวแปร:

```js run
let message;
message = 'สวัสดี!';

*!*
alert(message); // แสดงเนื้อหาของตัวแปร
*/!*
```

เพื่อความกระชับ, เราสามารถรวมการประกาศตัวแปรและการกำหนดค่าเข้าด้วยกันในบรรทัดเดียว:

```js run
let message = 'สวัสดี!'; // กำหนดตัวแปรและกำหนดค่า

alert(message); // สวัสดี!
```

เรายังสามารถประกาศตัวแปรหลายตัวในบรรทัดเดียว:

```js no-beautify
let user = 'จอห์น', age = 25, message = 'สวัสดี';
```

ที่อาจดูสั้นกว่า, แต่เราไม่แนะนำ เพื่อให้อ่านได้อ่านขึ้น, เราแนะนำว่าควรประกาศหนึ่งตัวแปรต่อหนึ่งบรรทัด

แบบที่มีหลายบรรทัดนั้นยาวขึ้นนิดหน่อย, แต่ง่ายต่อการอ่าน:

```js
let user = 'จอห์น';
let age = 25;
let message = 'สวัสดี';
```

บางคนยังกำหนดตัวแปรหลายตัวในรูปแบบที่มีหลายบรรทัดนี้:

```js no-beautify
let user = 'จอห์น',
  age = 25,
  message = 'สวัสดี';
```

...หรือแม้กระทั่งในรูปแบบ "comma-first":

```js no-beautify
let user = 'จอห์น'
  , age = 25
  , message = 'สวัสดี';
```

จากทางเทคนิค, ทุกๆ รูปแบบนี้ทำงานเหมือนกัน ดังนั้น, มันเป็นเรื่องของรสนิยมส่วนบุคคลและความสวยงามของโค้ด

````smart header="`var` แทน `let`"
ในสคริปต์ที่เก่ากว่า เราอาจจะพบคีย์เวิร์ดอื่น: `var` แทน `let`:

```js
*!*var*/!* message = 'สวัสดี';
```

คีย์เวิร์ด `var` นั้น *แทบจะ* เหมือนกับ `let` มันคือประกาศตัวแปรเหมือนกัน แต่มันแบบเก่า

มีความแตกต่างที่ละเอียดระหว่าง `let` และ `var` แต่ไม่สำคัญสำหรับเราในขณะนี้ เราจะพูดถึงเรื่องนี้อย่างละเอียดในบท <info:var>
````

## หากเทียบกับชีวิตจริง

เราสามารถเข้าใจแนวคิดของ "ตัวแปร" ได้ง่ายหากเราจินตนาการว่ามันคือ "กล่อง" สำหรับข้อมูล, มีสติ๊กเกอร์ที่มีชื่อที่ไม่ซ้ำกันติดอยู่บนกล่อง

ตัวอย่างเช่น ตัวแปร `message` สามารถจินตนาการได้ว่าเป็นกล่องที่มีป้ายชื่อ `"message"` และมีค่า `"สวัสดี!"` อยู่ในกล่อง:

![](variable.svg)

เราสามารถใส่ค่าอะไรก็ได้ลงในกล่อง

เรายังสามารถเปลี่ยนแปลงค่าในกล่องได้เท่าที่เราต้องการ:

```js run
let message;

message = 'สวัสดี!';

message = 'โลก!'; // ค่าถูกเปลี่ยน

alert(message);
```

เมื่อค่าถูกเปลี่ยน ข้อมูลเก่าจะถูกลบออกจากตัวแปร:

![](variable-change.svg)

เรายังสามารถประกาศตัวแปรสองตัวและคัดลอกข้อมูลจากตัวหนึ่งไปยังอีกตัวหนึ่ง

```js run
let hello = 'สวัสดี โลก!';

let message;

*!*
// คัดลอก 'สวัสดี โลก!' จาก hello ไปยัง message
message = hello;
*/!*

// ตอนนี้มีตัวแปรสองตัวที่เก็บข้อมูลเดียวกัน
alert(hello); // สวัสดี โลก!
alert(message); // สวัสดี โลก!
```

````warn header="ประกาศตัวแปรซ้ำกันจะทำให้เกิดข้อผิดพลาด"
ตัวแปรควรถูกประกาศเพียงครั้งเดียว

การประกาศตัวแปรเดิมซ้ำๆจะเป็นข้อผิดพลาด:

```js run
let message = "นี้";

// 'let' ประกาศคัวแปรเดิมซ้ำจะนำไปสู่ข้อผิดพลาด
let message = "นั่น"; // SyntaxError: 'message' ถูกประกาศแล้ว
```
ดังนั้น, เราควรประกาศตัวแปรครั้งเดียวแล้วจึงอ้างอิงถึงมันโดยไม่ต้องใช้ `let`.
````

```smart header="ภาษาการเขียนโปรแกรมแบบฟังก์ชัน"
น่าสนใจที่จะทราบว่ามีภาษาการเขียนโปรแกรมแบบ [pure functional](https://en.wikipedia.org/wiki/Purely_functional_programming) ที่ห้ามการเปลี่ยนแปลงค่าของตัวแปร, เช่น [Haskell](https://en.wikipedia.org/wiki/Haskell)

ในภาษาเหล่านี้, เมื่อค่าถูกจัดเก็บ "ในกล่อง" มันจะอยู่ที่นั่นตลอดไป ถ้าเราต้องการจัดเก็บสิ่งอื่น ภาษาจะบังคับให้เราสร้างกล่องใหม่ (ประกาศตัวแปรใหม่) เราไม่สามารถนำกล่องเก่ามาใช้ซ้ำได้

แม้ว่ามันอาจจะดูแปลก ๆ ในตอนแรก แต่ภาษาเหล่านี้สามารถพัฒนาอย่างจริงจังได้ ยิ่งไปกว่านั้น ยังมีพื้นที่อื่นๆ เช่น การคำนวณแบบขนาน (parallel computations) ซึ่งข้อจำกัดนี้ให้ประโยชน์บางประการ
```

## การตั้งชื่อตัวแปร

ในการตั้งชื่อตัวแปรใน JavaScript มีข้อจำกัด 2 ข้อ:

1. ชื่อต้องประกอบด้วยตัวอักษร, ตัวเลข, หรือสัญลักษณ์ `$` และ `_` เท่านั้น
2. ตัวอักษรตัวแรกต้องไม่เป็นตัวเลข

ตัวอย่างของชื่อที่ถูกต้อง:

```js
let userName;
let test123;
```

เมื่อชื่อประกอบด้วยหลายคำมักจะใช้ [camelCase](https://en.wikipedia.org/wiki/CamelCase) นั่นคือ: หากมีคำต่อกัน คำแรกที่ขึ้นจะเป็นพิมพ์เล็ก ส่วนคำที่เหลือจะเริ่มต้นด้วยพิมพ์ใหญ่: `myVeryLongName`

สิ่งที่น่าสนใจ - สัญลักษณ์ดอลลาร์ `'$'` และขีดล่าง `'_'` สามารถใช้ในชื่อได้ พวกเขาเป็นสัญลักษณ์ปกติเหมือนตัวอักษร ไม่มีความหมายพิเศษ

เราสามารถตั้งชื่อแบบนี้ได้:

```js run untrusted
let $ = 1; // ประกาศตัวแปรชื่อ "$"
let _ = 2; // และตอนนี้ตัวแปรชื่อ "_"

alert($ + _); // 3
```

ตัวอย่างชื่อตัวแปรที่ไม่ถูกต้อง:

```js no-beautify
let 1a; // ไม่สามารถเริ่มต้นด้วยตัวเลข

let my-name; // ไม่อนุญาตให้ใช้ขีดกลาง '-' ในชื่อ
```

```smart header="ตัวพิมพ์ใหญ่และตัวพิมพ์เล็กมีความแตกต่าง"
ตัวแปรที่ชื่อ `apple` และ `APPLE` เป็นตัวแปรคนละตัวกัน
```

````smart header="อนุญาตให้ใช้ตัวอักษรที่ไม่ใช่ละติน แต่ไม่แนะนำ"
เราสามารถใช้ภาษาใดๆ รวมถึงตัวอักษรซีริลลิค ตัวอักษรจีนและอื่น ๆ มาตั้งชื่อตัวแปรได้เช่น:

```js
let ชื่อ = '...';
let ผม = '...';
```

ทางเทคนิค ไม่มีข้อผิดพลาด ชื่อเหล่านี้อนุญาต แต่มีข้อตกลงระหว่างประเทศที่จะใช้ภาษาอังกฤษในชื่อตัวแปร แม้ว่าเราจะเขียนสคริปต์ขนาดเล็ก มันอาจมีอายุยาวไปข้างหน้า คนจากประเทศอื่นอาจจำเป็นต้องอ่านโค้ดที่เราเขียนขึ้นมาก็ได้
````

````warn header="ชื่อที่ถูกสงวนไว้"
มี[รายชื่อคำที่ถูกสงวนไว้](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords) ที่ไม่สามารถใช้เป็นชื่อตัวแปรได้ เนื่องจากคำเหล่านี้ถูกใช้โดยภาษาเอง

เช่น: `let`, `class`, `return`, และ `function` ถูกสงวนไว้

โค้ดด้านล่างนี้จะให้ข้อผิดพลาดทางไวยากรณ์:

```js run no-beautify
let let = 5; // ไม่สามารถตั้งชื่อตัวแปรเป็น "let", ข้อผิดพลาด!
let return = 5; // ไม่สามารถตั้งชื่อตัวแปรเป็น "return" ได้, ข้อผิดพลาด!
```
````

````warn header="การกำหนดค่าโดยไม่มี `use strict`"

โดยปกติเราต้องกำหนดตัวแปรก่อนที่จะใช้งาน แต่ในยุคเก่าๆ มันเป็นไปได้ทางเทคนิคที่จะสร้างตัวแปรโดยการกำหนดค่าเพียงอย่างเดียวโดยไม่ใช้ `let` นี่ยังทำงานได้ตอนนี้ถ้าเราไม่ใส่ `use strict` ในสคริปต์ของเราเพื่อรักษาความสามารถในการทำงานร่วมกับสคริปต์เก่า

```js run no-strict
// หมายเหตุ: ไม่มี "use strict" ในตัวอย่างนี้

num = 5; // ตัวแปร "num" ถูกสร้างขึ้นถ้ายังไม่มีอยู่

alert(num); // 5
```

นี่เป็นแนวปฏิบัติที่ไม่ดีและจะทำให้เกิดข้อผิดพลาดในโหมดสมัยใหม่:

```js
"use strict";

*!*
num = 5; // ข้อผิดพลาด: num ไม่ได้ถูกกำหนด
*/!*
````

## ค่าคงที่ (constant)

เพื่อประกาศตัวแปรคงที่ (ไม่เปลี่ยนแปลง), ให้ใช้ `const` แทน `let`:

```js
const myBirthday = '18.04.1982';
```

ตัวแปรที่ประกาศด้วย `const` เรียกว่า "ค่าคงที่" ไม่สามารถเปลี่ยนแปลงค่าได้ การจะเปลี่ยนแปลงค่าจะทำให้เกิดข้อผิดพลาด:

```js run
const myBirthday = '18.04.1982';

myBirthday = '01.01.2001'; // ข้อผิดพลาด, ไม่สามารถเปลี่ยนค่าคงที่ได้!
```

เมื่อนักพัฒนาโปรแกรมมั่นใจว่าตัวแปรจะไม่เปลี่ยนแปลง, พวกเขาสามารถประกาศด้วย `const` เพื่อรับรองและสื่อสารอย่างชัดเจนให้ทุกคนทราบ

### ค่าคงที่เป็นตัวพิมพ์ใหญ่

มีการปฏิบัติที่แพร่หลายในการใช้ค่าคงที่เป็นนามแฝงสำหรับค่าที่ยากต่อการจดจำและที่ไม่ควรเปลี่ยนแปลง (เช่น, ค่าที่ใช้ในการกำหนดสี, ขนาดของรูปภาพ, และอื่นๆ)

ค่าคงที่เหล่านั้นมีชื่อเป็นตัวพิมพ์ใหญ่และแบ่งคำด้วยเครื่องหมายขีดล่าง `_`

ตัวอย่างเช่น มาสร้างค่าคงที่สำหรับสีในรูปแบบ "เว็บ" (ฐานสิบหก):

```js run
const COLOR_RED = "#F00";
const COLOR_GREEN = "#0F0";
const COLOR_BLUE = "#00F";
const COLOR_ORANGE = "#FF7F00";

// ...เมื่อเราต้องการเลือกสี
let color = COLOR_ORANGE;
alert(color); // #FF7F00
```

ประโยชน์:

- `COLOR_ORANGE` ง่ายต่อการจำมากกว่า `"#FF7F00"`
- เราพิมพ์เลขฐานสิบหกอย่าง `"#FF7F00"` ผิดได้ง่ายกว่า `COLOR_ORANGE`
- เมื่ออ่านโค้ด `COLOR_ORANGE` เราจะเข้าใจว่าหมายถึงสีอะไรมากกว่า `#FF7F00`

เมื่อไหร่เราควรใช้ตัวพิมพ์ใหญ่สำหรับค่าคงที่และเมื่อไหร่เราควรตั้งชื่อแบบปกติ? มาเคลียร์เรื่องนี้ให้ชัดเจน

การเป็น "ค่าคงที่" หมายความว่าค่าของตัวแปรไม่เปลี่ยนแปลง แต่มีค่าคงที่ที่ทราบก่อนการดำเนินการ (เช่น ค่าสีแดงแบบฐานสิบหก) และมีค่าคงที่ที่ *คำนวณ* ในเวลาทำงาน ระหว่างการดำเนินการ แต่ไม่เปลี่ยนแปลงหลังจากการกำหนดค่าเริ่มต้น

ตัวอย่างเช่น:

```js
const pageLoadTime = /* เวลาที่ใช้ในการโหลดหน้าเว็บ */;
```

ค่าของ `pageLoadTime` ไม่รู้ก่อนโหลดหน้าเว็บ ดังนั้นจึงตั้งชื่อเป็นปกติ แต่มันยังคงเป็นค่าคงที่เพราะมันไม่เปลี่ยนแปลงหลังจากการกำหนดค่า

กล่าวอีกนัยหนึ่ง ค่าคงที่ที่มีตัวพิมพ์ใหญ่ถูกใช้เพียงเป็นชื่อย่อสำหรับค่าที่เข้ารหัสแบบ "hard-coded" เท่านั้น

## ## เรียกชื่อให้ถูกต้อง

เมื่อพูดถึงตัวแปร ยังมีสิ่งสำคัญอีกอย่างหนึ่งที่สำคัญมากที่สุด

ชื่อตัวแปรควรมีความหมายที่ชัดเจนและเป็นที่เข้าใจง่าย และอธิบายถึงข้อมูลที่ตัวแปรเก็บได้

การตั้งชื่อตัวแปรเป็นหนึ่งในทักษะที่สำคัญและซับซ้อนที่สุดในการเขียนโปรแกรม ด้วยการสังเกตชื่อตัวแปรแค่รูปแบบสั้นๆ เราสามารถรู้ว่าโค้ดนั้นเขียนโดยผู้เริ่มต้นหรือนักพัฒนาที่มีประสบการณ์แล้วได้เลย

ในโปรเจคจริง ส่วนใหญ่ของเวลาจะใช้ในการปรับแก้และขยายโค้ดที่มีอยู่แล้ว มากกว่าการเขียนโค้ดใหม่จากต้นเริ่มทั้งหมด ดังนั้นเมื่อเรากลับมาดูโค้ดบางส่วนหลังจากทำสิ่งอื่นไปพักหนึ่งครั้ง การหาข้อมูลที่มีการตั้งชื่อได้ดีจะง่ายกว่ามาก กล่าวอีกนัยหนึ่งคือเมื่อตัวแปรมีชื่อที่ดี

กรุณาใช้เวลาในการคิดชื่อที่ถูกต้องสำหรับตัวแปรก่อนที่จะประกาศ การทำเช่นนี้จะช่วยให้คุณประหยัดเวลาในการเขียนโค้ดในอนาคต

กฎที่ควรจำไว้บางอย่างคือ:

- ใช้ชื่อที่อ่านง่ายเหมือน `userName` หรือ `shoppingCart`
- หลีกเลี่ยงการใช้ตัวย่อหรือชื่อสั้นเช่น `a`, `b`, `c` ยกเว้นในกรณีที่เราแน่ใจว่าเราทำอะไรอยู่จริงๆ
- ตั้งชื่อให้เป็นอย่างสั้นและอธิบายได้มากที่สุด ตัวอย่างของชื่อที่ไม่ดีคือ `data` และ `value` เช่นนั้นชื่อเหล่านี้ไม่พูดอะไรเลย แต่ถ้ามีข้อความในโค้ดที่ชัดเจนว่าตัวแปรนั้นอ้างถึงข้อมูลหรือค่าใด ๆ ก็ยอมใช้ชื่อเหล่านี้ได้
- ตกลงเรื่องของคำศัพท์ภายในทีมและในใจของคุณเอง หากผู้เยี่ยมชมเว็บไซต์เรียกว่า "ผู้ใช้" แล้วเราควรตั้งชื่อตัวแปรที่เกี่ยวข้องว่า `currentUser` หรือ `newUser` แทนที่จะเป็น `currentVisitor` หรือ `newManInTown`

ง่ายหรือเปล่า? ใช่ในความเป็นจริง แต่การสร้างชื่อตัวแปรที่อธิบายได้ละเอียดและกระชับในการปฏิบัติจริงนั้นไม่ง่ายนัก

```smart header="Reuse or create?"
และข้อคิดสุดท้าย มีนักพัฒนาโปรแกรมบางคนที่ขี้เกียจที่จะประกาศตัวแปรใหม่และมักจะนำตัวแปรที่มีอยู่มาใช้ซ้ำ

ผลที่ได้คือตัวแปรของพวกเขากลายเป็นกล่องที่คนอื่นๆ หยอดสิ่งต่างๆ เข้าไปโดยไม่เปลี่ยนสติกเกอร์ สิ่งใดอยู่ข้างในกล่องตอนนี้? ไม่มีใครรู้? เราต้องเปิดกล่องเพื่อดู

นักพัฒนาเช่นนี้ประหยัดเล็กน้อยในการประกาศตัวแปร แต่สูญเสียมากกว่าสิบเท่านั้นในการแก้บั๊ก

ตัวแปรเพิ่มขึ้นเป็นสิ่งที่ดี ไม่ใช่สิ่งที่แย่ มันช่วยให้โค้ดของคุณอ่านง่ายขึ้น และช่วยให้คุณเข้าใจโค้ดของคุณได้ดีขึ้น

เครื่องมือสกัดรหัส (minifiers) JavaScript และเบราว์เซอร์รุ่นใหม่สามารถปรับปรุงโค้ดได้ดีเพียงพอ ดังนั้นมันจะไม่สร้างปัญหาเรื่องประสิทธิภาพ การใช้ตัวแปรที่แตกต่างกันสำหรับค่าที่แตกต่างกันอาจช่วยให้เครื่องมือ (engine) ปรับปรุงรหัสของเราได้ดียิ่งขึ้น
```

## สรุป

เราสามารถประกาศตัวแปรเพื่อเก็บข้อมูลได้โดยใช้คีย์เวิร์ค `var`, `let`, หรือ `const`

- `let` -- เป็นการประกาศตัวแปรในแบบสมัยใหม่
- `var` -- เป็นการประกาศตัวแปรแบบสมัยเก่า โดยทั่วไปเราจะไม่ได้ใช้มันเลย แต่เราจะพูดถึงความแตกต่างที่ละเอียดเรื่อง `var` ในบทที่ <info:var> ไว้กรณีที่คุณต้องการใช้มัน
- `const` -- เป็นเหมือน `let` แต่ค่าของตัวแปรไม่สามารถเปลี่ยนแปลงได้

ตัวแปรควรตั้งชื่อให้เข้าใจง่ายเพื่อสื่อว่าข้อมูลภายในมีอะไรอยู่ และควรเป็นคำที่สั้นๆ และอ่านง่าย