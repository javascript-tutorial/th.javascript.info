# ตัวแปร

โดยปกติแล้วแอพพลิชั่นที่พัฒนาด้วยจาวาสคริปต์ มักจะต้องทำงานร่วมกับข้อมูลมากมาย
1. แอพฯร้านค้าออนไลน์ -- ข้อมูลที่ว่าก็คือ สินค้าที่ขาย ตะกร้าสินค้า และอื่นๆ
2. แอพฯแชท -- ข้อมูลที่ว่าก็คือ ผู้ใช้ ข้อความ และอื่นๆ

ตัวแปรจึงมีหน้าที่คอยเก็บข้อมูลในแอพฯ

## ตัวแปรหนึ่งๆ

[ตัวแปร](https://th.wikipedia.org/wiki/ตัวแปร_(วิทยาการคอมพิวเตอร์)) คือ "หน่วยเก็บข้อมูลที่ระบุชื่อ​ (named storage)" ที่เราสามารถใช้เก็บช้อมูลสินค้า ผู้เข้าชม และข้อมูลอื่นๆได้

เพื่อสร้างตัวแปรในจาวาสคริปต์ เราจะใช้คีย์เวิร์ดว่า `let`

โดยที่คำสั่งด้านล่างหมายถึงการสร้าง (บางทีจะเรียกว่า: *ประกาศ*) ตัวแปรโดยตั้งชื่อให้ว่า "message":

```js
let message;
```

ทีนี้ เราสามารถเก็บข้อมูลลงไปในตัวแปรนี้ได้โดยใช้ assignment operator อย่าง `=`:

```js
let message;

*!*
message = 'Hello'; // เก็บค่าสตริง 'Hello' เอาไว้ในตัวแปรที่ชื่อ message
*/!*
```

สตริงตัวนี้จะถูกบันทึกลงในหน่วยความจำที่เกี่ยวข้องกับตัวแปรที่เราสร้างไว้ เราจึงสามารถเข้าถึงค่าที่เก็บไว้โดยใช้ชื่อตัวแปร

```js run
let message;
message = 'Hello!';

*!*
alert(message); // ดูว่า "message" เก็บอะไรไว้
*/!*
```

เพื่อให้โค้ดดูกระชับขึ้น เราได้รวมบรรทัดที่สร้างตัวแปร กับ กำหนดค่าให้ตัวแปร ไว้บรรทัดเดียวกัน

```js run
let message = 'Hello!'; // ทั้งสร้างตัวแปร และ กำหนดค่าให้ตัวแปร ไปพร้อมกัน

alert(message); // Hello!
```

เราสามารถสร้างตัวแปร และ กำหนดค่าให้ตัวแปร พร้อมกันหลายๆตัวได้ ดังนี้

```js no-beautify
let user = 'John', age = 25, message = 'Hello';
```

โค้ดด้านบนที่ดูทั้งสั้นและกระชับ แต่เราไม่แนะนำให้ทำแบบนี้ ทางที่ดีเราควรจะสร้างและกำหนดค่าตัวแปรต่อบรรทัด เพื่อให้ง่ายต่อการอ่านโค้ด

ตัวแปรหลายบรรทัดแบบนี้จะยาวขึ้นหน่อย แต่มันก็ช่วยให้อ่านง่ายขึ้น:

```js
let user = 'John';
let age = 25;
let message = 'Hello';
```

บางคนก็เขียนในรูปแบบนี้
```js no-beautify
let user = 'John',
  age = 25,
  message = 'Hello';
```

...หรือกระทั่งเขียนแบบ "ใข้ลูกน้ำเปิดบรรทัด"

```js no-beautify
let user = 'John'
  , age = 25
  , message = 'Hello';
```

ในทางเทคนิคแล้ว ตัวอย่างทั้งหมดทำในสิ่งเดียวกัน คือสร้างและกำหนดค่าตัวแปรหลายตัว การเขียนแบบด้านบนจึงเป็นเรื่องของรสนิยม และสุนทรียส่วนตัว

````smart header="`var` แทนด้วย `let`"
ในโค้ดเก่าๆ เราจะเจอการประกาศตัวแปรด้วย `var` แทนที่จะเป็น `let`:

```js
*!*var*/!* message = 'Hello';
```

การใช้ `var` *แทบจะ* เหมือน `let` ทุกประการ 

ระหว่าง `let` กับ `var` มีความแตกต่างกันเล็กน้อย โดยเรายังจะไม่ลงลึกในส่วนนี้ แต่จะลงลึกในบท  <info:var> แทน
````

## เปรียบเทียบกับชีวิตจริง

ให้เราจินตนาการว่า "ตัวแปร" ก็เหมือน "กล่อง" แต่แทนที่จะบรรจุของอยู่ภายใน มันดันเป็นกล่องที่บรรจุข้อมูลแทน แถมยังมีสติกเกอร์ชื่อกล่องติดไว้อีกด้วย

ตัวอย่างเช่นตัวแปร `message` ก็คือกล่องที่มีสติกเกอร์ชื่อติดไว้ว่า `message` พร้อมกับบรรจุข้อมูล `"Hello!"` อยู่ภายใน

![](variable.svg)

เราสามารถใส่ค่าอะไรก็ได้ลงไปในกล่อง

เรายังสามารถเปลี่ยนมันเป็นก็ได้ทุกเมื่อที่เราต้องการ
```js run
let message;

message = 'Hello!';

message = 'World!'; // เปลี่ยนค่า

alert(message);
```

เมื่อค่าเปลี่ยน ข้อมูลเก่าจะถูกลบจากตัวแปรทันที:

![](variable-change.svg)

เรายังสามารถสร้างตัวแปร และคัดลอกข้อมูลจากอีกตัวแปรหนึ่ง ให้อีกตัวแปรหนึ่งได้ด้วย

```js run
let hello = 'Hello world!';

let message;

*!*
// คัดลอก 'Hello world' จากตัวแปร hello มาให้ตัวแปร message
message = hello;
*/!*

// ทีนี้ตัวแปรสองตัวจะมีค่าเดียวกัน
alert(hello); // Hello world!
alert(message); // Hello world!
```

````warn header="หากประกาศซ้ำกัน ก็จะเกิด error ขึ้น"
ตัวแปรควรประกาศเพียงครั้เดียว

การประกาศตัวแปรเหมือนกับตัวแปรเดิมจะเกิด error ได้

```js run
let message = "This";

// ประกาศ 'let' ซ้ำก็จะ error
let message = "That"; // SyntaxError: 'message' has already been declared
```
ดังนั้น เราควรประกาศตัวแปรเพียงครั้งเดียว และโดยที่ไม่ต้องประกาศ `let` ซ้ำอีกที
````

```smart header="ภาษาเชิงฟังชั่นก์"
สิ่งที่น่าสนใจสำหรับภาษาโปรแกรมมิ่งเชิง[ฟังชั่น](https://en.wikipedia.org/wiki/Functional_programming) อย่างเช่น [Scala](http://www.scala-lang.org/) หรือ [Erlang](http://www.erlang.org/) ก็คือห้ามเปลี่ยนค่าของตัวแปร

ในภาษาประเภทนี้เมื่ออะไรก็ตามถูกเก็บไว้ในกล่อง สิ่งๆนั้นจะต้องอยู่ในกล่องตลอดกาล ถ้าเราต้องการเก็บค่าอื่นๆ เราจะต้องสร้างตัวแปรขึ้นมาใหม่แทน โดยตัวภาษาจะบังคับให้เราทำกล่องใบใหม่ขึ้นมา เราไม่สามารถใช้กล่องเก่าซ้ำได้

แม้ว่ามันอาจจะดูแปลกๆเล็กน้อย แต่ข้อจำกัดเหล่านี้กลับมีประโยชน์ในบางอย่างในด้านการพัฒนาแอพฯอย่างมาก โดยเฉพาะการทำงานได้มากกว่าสองอย่างในเวลาเดียวกัน เราแนะนำการศึกษาภาษาจำพวกเชิงฟังก์ชั่น เพื่อเปิดมุมมองให้กว้างขึ้น
```

## การตั้งชื่อตัวแปร [#variable-naming]

มีข้อยกเว้นในการตั้งชื่อตัวแปรอยู่ 2 ข้อด้วยกัน

1. ชื่อควรประกอบด้วย ข้อความ, ตัวเลข หรือเครื่องหมาย `$` และ `_`
2. ชื่อตัวแปรห้ามขึ้นต้นด้วยตัวเลข

ตัวอย่างการตั้งชื่อ:

```js
let userName;
let test123;
```

หากชื่อประกอบด้วยคำมากกว่าหนึ่งคำ เราจะใช้การแบ่งคำแบบ [camelCase](https://en.wikipedia.org/wiki/CamelCase) นั่นก็คือ: คำแรกจะขึ้นต้นด้วยตัวเล็ก คำต่อๆมาก็จะขึ้นต้นด้วยตัวใหญ่ `myVeryLongName`

สิ่งที่น่าสนใจก็คือ -- สัญลักษณ์ดอลล่าร์ `'$'` และ underscore `'_'` สามารถนำมาตั้งชื่อตัวแปรได้ด้วย สัญลักษณ์เหล่านี้เป็นเพียงสัญลักษณ์ธรรมดา เหมือนตัวอักษรไม่ได้มีความหมายพิเศษอะไร

สามารถตั้งชื่อแบบนี้ได้

```js run untrusted
let $ = 1; // ตั้งชื่อตัวแปรด้วย "$"
let _ = 2; // ทีนี้ก็ตั้งด้วย "_"

alert($ + _); // 3
```

ตัวอย่างชื่อตัวแปรที่ไม่สามารถตั้งได้

```js no-beautify
let 1a; // ห้ามขึ้นต้นด้วยตัวเลข

let my-name; // hyphens '-' ห้ามมีในชื่อ
```

```smart header="พิมพ์เล็กพิมพ์ใหญ่นั้นสำคัญ"
ตัวแปรชื่อ `apple` กับตัวแปรชื่อ `AppLE` เป็นคนละตัวแปรกัน
```

````smart header="สามารถตั้งชื่อตัวแปรที่ไม่ใช่ตัวอักษรละตินได้ แต่ไม่แนะนำ"
สามารถตั้งชื่อตัวแปรเป็นภาษาอะไรก็ได้ แม้กระทั่ง อักษรซีริลลิก (cyrillic) หรือ อักษรอียิปต์โบราณ (hieroglyphs) แบบนี้

```js
let имя = '...';
let 我 = '...';
```

ในทางเทคนิค เราสามารถทำได้โดยที่ไม่มีข้อผิดพลาดเกิดขึ้น เราสามารถตั้งชื่อตัวแปรแบบนี้ได้ แต่สากลนิยมจะใช้ภาษาอังกฤษเป็นชื่อตัวแปร แม้ว่าจะเราเขียนไฟล์สคริปต์ไม่กี่บรรทัด มันก็มีโอกาสที่จะมีชาวต่างชาติมาอ่านเพื่อทำความเข้าใจสคริปต์ไม่กี่บรรทัดนี้

````

````warn header="ชื่อที่ถูกสงวน"
นี่คือ[รายชื่อคำที่ถูกสงวนไว้](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords) คำเหล่านี้ไม่สามารถนำมาตั้งชื่อตัวแปรได้ เพราะถูกสงวนไว้ให้ตัวภาษาใช้

ตัวอย่างเช่น: `let`, `class`, `return`, และ `function` ทั้งหมดเป็นคำสงวน

หากเรานำคำสงวนไปตั้งชื่อตัวแปรก็จะเกิดข้อผิดพลาดขึ้น

```js run no-beautify
let let = 5; // ไม่สามารถตั้งชื่อตัวแปรว่า "let" ได้
let return = 5; // ไม่สามารถตั้งชื่อตัวแปรว่า "return" ได้
```
````

````warn header="การกำหนดค่าตัวแปรเมื่อไม่มี "use strict""

ในทางเทคนิคเราสามารถสร้างตัวแปรโดยไม่จำเป็นต้องใช้คีย์เวิร์คอย่าง `let` ได้ โค้ดส่วนนี้สามาถทำงานได้ ถ้าเราไม่ใส่ `"use strict"` ลงไป

```js run no-strict
// อย่าลืมว่า: ไม่มี "use strict" ในตัวอย่างนี้

num = 5; // ตัวแปรชื่อ "num" ถูกสร้าง

alert(num); // 5
```

แต่ด้านบนเป็นแนวทางปฎิบัติที่ไม่ดี เพราะโค้ดจะเกิดข้อผิดพลาดทันที เมื่อไปอยู่ในโหมด "use strict"

```js
"use strict";

*!*
num = 5; // error: num is not defined
*/!*
```
````

## ค่าคงที่

ค่าคงที่คือตัวแปรชนิดหนึ่งที่ไม่สามารถเปลี่ยนแปลงข้อมูลภายหลังได้ เราจะใช้คีย์เวิร์ค `const`

```js
const myBirthday = '18.04.1982';
```

ตัวแปรที่สร้างโดยใช้คีย์เวิร์ค `const` จะเรียกว่า "ค่าคงที่ (constants)" ค่าคงที่ไม่สามารถกำหนดค่าใหม่ได้ หากเรามีกำหนดค่าใหม่ให้ตัวแปรดังกล่าวจะทำให้เกิดข้อผิดพลาดขึ้นได้

```js run
const myBirthday = '18.04.1982';

myBirthday = '01.01.2001'; // error, can't reassign the constant!
```

เมื่อโปรแกรมเมอร์แน่ใจแล้วว่าตัวแปรที่สร้างจะไม่มีวันเปลี่ยนค่าแน่นอน พวกเขาจะใช้ `const` แทน และช่วยให้โปรแกรมเมอร์คนอื่นๆเข้าใจโค้ดที่เขียนด้วย

### ชื่อของค่าคงที่มักใช้ตัวพิมพ์ใหญ่

วิธีปฎิบัติที่ใช้กันทั่วไปคือ ตัวแปรที่เป็นค่าคงที่ จะเป็นค่าที่ยากต่อการจดจำ

ค่าคงที่เราจะใช้ตัวพิมพ์ใหญ่และตามด้วย underscore แบ่งระหว่างคำ

ตัวอย่าง สร้างค่าคงที่สำหรับเก็บสีที่ใช้ในเว็บ (ในรูปแบบเลขฐานสิบหก)

```js run
const COLOR_RED = "#F00";
const COLOR_GREEN = "#0F0";
const COLOR_BLUE = "#00F";
const COLOR_ORANGE = "#FF7F00";

// ...เมื่อเราจะเลือกสี
let color = COLOR_ORANGE;
alert(color); // #FF7F00
```

ประโยชน์:

- `COLOR_ORANGE` จำง่ายกว่า `"#FF7F00"`
- มีโอกาสพิมพ์ `"#FF7F00"` ผิด แทนที่จะเป็น `COLOR_ORANGE`
- เวลาคนอื่นอ่านโค้ด `COLOR_ORANGE` จะสื่อความหมายมากกว่า `#FF7F00`.

ค่าคงค่าแบบไหนควรจะตั้งชื่อเป็นตัวพิมพ์ใหญ่ และแบบไหนควรจะใช้ชื่อแบบปกติ (camelCase) เราจะมาช่วยให้กระจ่างกัน

การเป็น "ค่าคงที่" หมายถึงค่าที่เก็บอยู่ในตัวแปร จะต้องไม่มีการเปลี่ยนแปลง มีค่าคงที่ที่เป็นค่าตายตัวไม่เปลี่ยนแปลง (อย่างสีแบบเลขฐานสิบหก) และ มีค่าคงที่ที่จะถูก*คำนวณ*ตอนโปรแกรมทำงาน ซึ่งค่าจะเปลี่ยนแปลงหลังจากโปรแกรมทำงาน ไม่ได้เปลี่ยนค่าเริ่มต้น

ตัวอย่างเช่น

```js
const pageLoadTime = /* กำหนดเวลาโหลดหน้าเว็บ */;
```

เราไม่รู้ว่าค่าของ `pageLoadTime` เป็นเท่าไหร่ จนกว่าเว็บจะถึงเวลาโหลดเว็บจริงๆ ดังนั้นชื่อตัวแปรนี้เลยตั้งแบบปกติ(camelCase) แต่ตัวแปรนี้ยังถือเป็นค่าคงที่ เพราะมันถูกกำหนดค่าใหม่เลย

อีกนัยหนึ่ง การใช้ตัวพิมพ์ใหญ่เป็นชื่อของค่าคงที่จะใช้ในค่าที่เราเรียกกันว่า "hard-coded"

## ตั้งชื่อให้ถูก

พูดถึงตัวแปร มีข้อสำคัญสำหรับการตั้งชื่อตัวแปร

ชื่อตัวแปรควรจะมีความหมายที่ชัดเจน และอธิบายค่าที่ตัวแปรนี้เก็บไว้

การตั้งชื่อตัวแปรเป็นทักษะที่สำคัญที่สุดอย่างหนึ่งในการเขียนโปรแกรม การตั้งชื่อตัวแปรสามารถบอกได้เลยว่า โค้ดนี้ถูกเขียนมาจากผู้เริ่มต้น หรือผู้มีประสบการณ์แล้ว

ในโปรเจคจริง เราจะใช้เวลาส่วนใหญ่ไปกับการปรับแต่งและเพิ่มเติมโค้ดที่มีอยู่แล้ว มากกว่าจะไปเขียนอะไรใหม่เริ่มจากศูนย์เลย ฉะนั้นหากเราห่างจากโค้ดเดิมๆไปนานๆ แล้วกลับมาเขียนใหม่ การตั้งชื่อที่ดีมีผลช่วยให้เราหย่อนระยะเวลาในการไล่โค้ดของเราเอง

ใช้เวลาคิดสักครู่หนึ่งเกี่ยวกับการตั้งชื่อตัวแปร การทำเช่นนี้จะตอบแทนเราอย่างงาม

กฎที่ควรปฎิบัติตาม

- ใช้ชื่อที่มนุษย์อ่านแล้วเข้าใจอย่าง `userName` หรือ `shoppingCart`
- หลีกเลี่ยงการใช้ชื่อย่ออย่าง `a`, `b`, `c`, เว้นแต่เรารู้จริงๆว่าตัวแปรนี้ทำอะไร
- ตั้งชื่อให้เป็นคำอธิบายที่สั้นและกระชับมากที่สุด ชื่อที่ไม่ดีอย่าง `data` และ `value` ชื่อแบบนี้ไม่ได้สื่ออะไรเลย ดังนั้นควรทำให้ชื่อตัวแปรเหล่านี้ชัดเจน เหมาะสมกับบริบทนั้นๆ หรือค่าที่ตัวแปรนั้นอ้างอิงอยู่
- ทำข้อตกลงกับทีม ถ้าผู้เยี่ยมชมเว็บไซต์จะเรียกว่า "user" เราควรตั้งชื่อตัวแปรที่เกี่ยวข้องว่า `currentUser` หรือ `newUser` แทนที่จะเป็น `currentVisitor`

ฟังดูง่ายไหม? อันที่จริงก็ใช่ แต่ในทางปฎิบัติแล้วการตั้งชื่อแปรที่สั้น กระชับ พร้อมทั้งอธิบายค่าที่เก็บในตัวแปรได้อย่างรัดกุม ไม่ใช่เรื่องที่ง่ายเลย

```smart header="ใช้ซ้ำหรือสร้างใหม่ไปเลย"
ก่อนจะจากกัน มีโปรแกรมเมอร์ขี้เกียจบางคน แทนที่จะสร้างตัวแปรใหม่ กลับใช้ตัวแปรเดิมซ้ำๆ

ผลก็คือ ตัวแปรนั้นจะเหมือนกล่องสาธารณะที่แต่ละคนนำไปใช้ และเอาสิ่งใหม่เข้าไปแทนสิ่งเดิม ทีนี้เราก็จะไม่รู้ว่ากล่องนี้เก็บอะไรไว้

การปฎิบัติเช่นนี้ช่วยประหยัดเวลาเพียงเล็กน้อย เพื่อจะได้ไม่ต้องสร้างตัวแปรใหม่ แต่จะเสียเวลาเป็นสิบเท่าจากการหาบั๊ก

การสร้างตัวแปรเพิ่มนั้น ไม่ได้เลวร้ายเลย

การใช้ตัวแปรที่มากขึ้น เพื่อรับรองค่าที่หลากหลายในโมเดิร์นจาวาสคริปต์จะช่วยกำจัดสิ่งที่ไม่จำเป็นออกไป (minifiers) และเบราเซอร์ก็ช่วยปรับปรุง (optimize) โค้ดของเราส่วนหนึ่งให้ดีพอ ดังนั้นมันจะไม่สร้างปัญหาเรื่อง performance
```

## สรุป

เราสร้างตัวแปรเพื่อใช้เก็บค่าหรือข้อมูล โดยใช้คีย์เวิร์คอย่าง `var`, `let`, หรือ `const`

- `let` -- การสร้างตัวแปรแบบใหม่
- `var` -- การสร้างตัวแปรแบบเก่า ตอนนี้เราจะไม่ใช้มันแล้ว แต่เราจะพูดถึงความแตกต่างกันระหว่างของเก่ากับของใหม่กันในบท <info:var>
- `const` -- เหมือน `let` แต่ค่าที่เก็บอยู่ในตัวแปรนี้ไม่สามารถเปลี่ยนแปลงได้

ควรตั้งชื่อตัวแปรในทางที่ช่วยให้เราเข้าใจสิ่งที่เก็บอยู่ภายใน
