# โครงสร้างโค้ด

ในการเรียนรู้ภาษาโปรแกรมมิ่ง สิ่งแรกที่เราต้องทำความเข้าใจคือบล็อกพื้นฐานของโค้ด ซึ่งได้แก่ statements (คำสั่ง) และ comments (คอมเมนต์)

## Statements (คำสั่ง)

Statements คือโครงสร้างและคำสั่งทางไวยากรณ์ที่ใช้สั่งให้โปรแกรมทำการกระทำบางอย่าง

เราเคยเห็นตัวอย่างของ statement มาแล้วนั่นคือ `alert('Hello, world!')` ซึ่งเป็นคำสั่งให้แสดงข้อความ "Hello, world!"

เราสามารถเขียน statements ในโค้ดได้หลายคำสั่ง โดยแยกแต่ละคำสั่งด้วยเครื่องหมายอัฒภาค (semicolon)

ตัวอย่างเช่น ที่นี่เราแยก "Hello World" ออกเป็นสอง alerts:

```js run no-beautify
alert('Hello'); alert('World');
```

โดยปกติแล้ว statements จะเขียนแยกบรรทัดกันเพื่อให้อ่านโค้ดง่ายขึ้น:

```js run no-beautify
alert('Hello');
alert('World');
```

## เครื่องหมายอัฒภาค (Semicolons) [#semicolon]

ในหลายกรณี JavaScript อนุญาตให้ละเครื่องหมายอัฒภาคได้ถ้ามีการขึ้นบรรทัดใหม่

ตัวอย่างเช่น โค้ดนี้จะทำงานได้เหมือนกัน:

```js run no-beautify
alert('Hello')
alert('World') 
```

ที่นี่ JavaScript จะถือว่าการขึ้นบรรทัดใหม่เป็นการใส่เครื่องหมายอัฒภาคโดยนัย เรียกว่า [Automatic Semicolon Insertion](https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion)

**ในหลายๆ กรณี การขึ้นบรรทัดใหม่หมายถึงการใส่เครื่องหมายอัฒภาค แต่ "หลายๆ กรณี" ไม่ได้แปลว่า "เสมอไป"!**

มีบางสถานการณ์ที่การขึ้นบรรทัดใหม่ไม่ได้หมายถึงการใส่เครื่องหมายอัฒภาค เช่นในตัวอย่างนี้:

```js run no-beautify
alert(3 +
1  
+ 2);
```

โค้ดจะแสดงผลเป็น `6` เพราะ JavaScript ไม่ได้ใส่เครื่องหมายอัฒภาค มันเข้าใจได้เองว่าถ้าบรรทัดจบด้วย `+` แสดงว่า expression ยังไม่จบ การใส่เครื่องหมายอัฒภาคตรงนั้นจะไม่ถูกต้อง และในกรณีนี้มันก็ทำงานตรงตามที่เราต้องการจริงๆ 

**แต่มีบางสถานการณ์ที่ JavaScript "ไม่สามารถ" ใส่เครื่องหมายอัฒภาคให้เราในตำแหน่งที่ควรจะมี**

ข้อผิดพลาดที่เกิดจากการไม่ใส่เครื่องหมายอัฒภาคมักจะหาสาเหตุและแก้ไขได้ยาก

````smart header="ตัวอย่างข้อผิดพลาด"
ถ้าอยากเห็นตัวอย่างของข้อผิดพลาดเช่นนี้ ลองพิจารณาโค้ดนี้ดู:

```js run
alert("Hello");

[1, 2].forEach(alert);
```

ตอนนี้ไม่ต้องสนใจความหมายของ `[]` และ `forEach` เรายังไม่ได้เรียนเรื่องพวกนี้ เพียงแค่จำไว้ว่ามันจะแสดง `Hello` ตามด้วย `1` และ `2` ในบรรทัดถัดๆ ไป

ทีนี้ลองลบเครื่องหมายอัฒภาคหลัง `alert` ออกดู:

```js run no-beautify
alert("Hello")

[1, 2].forEach(alert);
```

ความต่างจากโค้ดก่อนหน้าคือไม่มีเพียงหนึ่งตัวอักษร นั่นคือเครื่องหมายอัฒภาค `;` ตอนจบบรรทัดแรก 

ถ้าเรารันโค้ดนี้ มันจะแสดง `Hello` แล้วเกิด error (คุณอาจต้องเปิดคอนโซลเพื่อดูมัน) โดยไม่มีการแสดงเลข 1 และ 2

นั่นเป็นเพราะ JavaScript ไม่ได้ใส่เครื่องหมายอัฒภาคโดยอัตโนมัติก่อนวงเล็บ `[...]` ดังนั้น โค้ดในตัวอย่างหลังจึงถูกรวมเป็นคำสั่งเดียวกันหมด

จริงๆ แล้ว JavaScript engine มองเห็นโค้ดเป็นแบบนี้:

```js run no-beautify
alert("Hello")[1, 2].forEach(alert);
```

ดูแปลกๆ ใช่ไหม? การรวมแบบนี้ไม่ถูกต้องแน่นอน เราต้องใส่เครื่องหมายอัฒภาคหลัง `alert` เพื่อให้โค้ดทำงานได้ถูกต้อง

ปัญหาแบบนี้อาจเกิดขึ้นได้ในสถานการณ์อื่นๆ ด้วย
````

เราแนะนำให้ใส่เครื่องหมายอัฒภาคระหว่าง statements แม้จะแยกคำสั่งด้วยการขึ้นบรรทัดใหม่แล้วก็ตาม กฎนี้เป็นที่ยอมรับอย่างกว้างขวางในชุมชนนักพัฒนา และอีกครั้ง *เราสามารถ* ละเครื่องหมายอัฒภาคได้ในหลายๆ กรณี แต่จะปลอดภัยกว่าโดยเฉพาะสำหรับมือใหม่ถ้าใส่มันไว้ตลอด 

## Comments (คอมเมนต์)

เมื่อเวลาผ่านไป โปรแกรมที่เราพัฒนาจะมีความซับซ้อนมากขึ้นเรื่อยๆ จึงจำเป็นต้องมีการเขียน *คอมเมนต์* ที่อธิบายว่าทำไมโค้ดถึงทำแบบนี้และมันทำอะไร

คอมเมนต์สามารถเขียนลงไปได้ทุกที่ในสคริปต์ มันจะไม่ส่งผลต่อการทำงานของโค้ดเพราะ JavaScript engine จะข้ามไปไม่สนใจพวกมัน

**คอมเมนต์บรรทัดเดียวเริ่มต้นด้วย `//`**

เนื้อหาที่เหลือของบรรทัดหลังเครื่องหมาย `//` จะเป็นคอมเมนต์ทั้งหมด มันอาจเป็นคอมเมนต์บรรทัดเดียวเต็มหรือต่อท้ายจาก statement ก็ได้

แบบนี้:

```js run
// คอมเมนต์นี้เป็นบรรทัดเดียว
alert('Hello');

alert('World'); // คอมเมนต์นี้ต่อท้าย statement
```

**คอมเมนต์หลายบรรทัดเริ่มด้วย <code>/&#42;</code> และจบด้วย <code>&#42;/</code>**

แบบนี้:

```js run
/* ตัวอย่างที่มีสองข้อความ
นี่คือคอมเมนต์ 
หลายบรรทัด
*/
alert('Hello');
alert('World'); 
```

เนื้อหาของคอมเมนต์จะถูกข้ามไปไม่ถูกประมวลผล ดังนั้นถ้าเราใส่โค้ดลงไปใน <code>/&#42; ... &#42;/</code> มันจะไม่ทำงาน

บางครั้งมีประโยชน์ในการปิดโค้ดบางส่วนชั่วคราวด้วย:

```js run
/* ใส่คอมเมนต์โค้ดนี้
alert('Hello');
*/
alert('World');
```

```smart header="ใช้ปุ่มลัดเพื่อใส่คอมเมนต์!"
ในเครื่องมือแก้ไขโค้ดส่วนใหญ่ คุณสามารถใส่คอมเมนต์บรรทัดเดียวให้โค้ดได้โดยกด `key:Ctrl+/`  สำหรับคอมเมนต์หลายบรรทัด ให้เลือกโค้ดแล้วกด `key:Ctrl+Shift+/` (บน Mac ใช้ `key:Cmd` แทน `key:Ctrl` และ `key:Option` แทน `key:Shift`)  
```

````warn header="คอมเมนต์ซ้อนกันไม่รองรับ!"
ไม่ควรมี <code>/&#42; ... &#42;/</code> อยู่ข้างในคอมเมนต์หลายบรรทัด <code>/&#42; ... &#42;/</code> อีก

โค้ดแบบนี้จะเกิดข้อผิดพลาด:

```js run no-beautify
/*
  /* คอมเมนต์ซ้อนกัน ?!? */
*/
alert( 'World' );
```
````

อย่าลังเลใจที่จะใส่คอมเมนต์ในโค้ดของคุณ

คอมเมนต์อาจจะเพิ่มปริมาณโค้ดให้มากขึ้นแต่นั่นไม่ใช่ปัญหา มีเครื่องมือหลายตัวที่ช่วยลดขนาดสคริปต์ก่อนนำไปเผยแพร่บนเซิร์ฟเวอร์จริง โดยจะตัดคอมเมนต์ทิ้งไปเลยทำให้ไม่ปรากฏในสคริปต์ที่ใช้งานจริง ดังนั้นคอมเมนต์จึงไม่ส่งผลกระทบด้านลบใดๆ ต่อการใช้งาน

ในบทต่อๆ ไปของบทเรียนอย่าง <info:code-quality> เราจะอธิบายเพิ่มเติมถึงวิธีเขียนคอมเมนต์ที่ดีด้วย
