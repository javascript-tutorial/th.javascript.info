# โครงสร้างของโค้ด

สิ่งที่เราจะมาสำรวจกันคือ ส่วนประกอบของโค้ด (building blocks of code)

## คำสั่ง (Statements)

ตำสั่งเป็นโครงสร้างทางไวยกรณ์เพื่อให้คอมพิวเตอร์ทำงานตามที่เราต้องการ

เราได้เห็นคำสั่งอย่าง `alert('Hello, world!')` กันมาแล้ว ซึ่งจะแสดงข้อความ "Hello, world!"

เราสามารถมีคำสั่งได้เป็นจำนวนมากในโค้ดของเรา และสามารถแยกคำสั่งแต่ละตัวออกด้วยเครื่องหมายเซมิโคลอน (;)

ตัวอย่างเช่น เราแบ่ง "Hello World" เป็นสองคำสั่งแสดงข้อความ:

```js run no-beautify
alert('Hello'); alert('World');
```

ตามปกติแล้ว คำสั่งจะเขียนบรรทัดละหนึ่งบรรทัดเพื่อทำให้โค้ดอ่านง่ายขึ้น:

```js run no-beautify
alert('Hello');
alert('World');
```

## เครื่องหมายเซมิโคลอน [#semicolon]

เราสามารถละการเขียนเครื่องหมายเซมิโคลอนได้หากเราเขียนคำสั่งคนละบรรทัด

ตัวอย่างเช่นนี้โค้ดก็ทำงานได้:

```js run no-beautify
alert('Hello')
alert('World')
```

ที่นี่ JavaScript จะตีความข้อความขึ้นบรรทัดใหม่เป็นเซมิโคลอนโดย "อัตโนมัติ" นี่เรียกว่า[การแทรกเซมิโคลอนอัตโนมัติ](https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion).

**โดยส่วนมาก การขึ้นบรรทัดใหม่คือการแทรกเซมิโคลอน แต่ก็ไม่ได้เสมอไป**

มีกรณีที่การเว้นบรรทัดไม่ได้หมายความถึงการแทรกเซมิโคลอน ตัวอย่างเช่น::

```js run no-beautify
alert(3 +
1
+ 2);
```

โค้ดจะแสดงผลเป็น `6` เนื่องจาก JavaScript ไม่แทรกเซมิโคลอนในที่นี่ จากดูได้ชัดเจนว่าถ้าบรรทัดจบด้วยเครื่องหมายบวก `"+"` จะเป็น "นิพจน์ไม่สมบูรณ์" ดังนั้นการแทรกเซมิโคลอนจะไม่ถูกต้อง และโค้ดจะทำงานผิดพลาด JavaScript ฉลาดพอที่รู้ว่าควรแทรกเซมิโคลอนหรือไม่

**แต่ก็ดันมีสถานการณ์ที่ JavaScript จะตีความผิดพลาดเช่นกัน**

ข้อผิดพลาดที่เกิดขึ้นในกรณีเช่นนี้มักจะยากในการค้นหาและแก้ไข

````smart header="ตัวอย่างของข้อผิดพลาดนี้"
หากคุณอยากรู้ว่าการเกิดข้อผิดพลาดแบบนี้เกิดขึ้นได้อย่างไร ลองดูโค้ดนี้:

```js run
alert("Hello");

[1, 2].forEach(alert);
```

อย่าพึ่งไปสนใจกับความหมายของเครื่องหมายวงเล็บเหลี่ยม `[]` และ `forEach` ในตอนนี้ เราจะศึกษาเรื่องเหล่านี้ในภายหลัง ในตอนนี้เพียงแค่จำผลลัพธ์ที่ได้จากการเรียกใช้โค้ด: มันจะแสดงผลว่า `Hello`, จากนั้น `1`, แล้ว `2`

ที่นี้ลองลบเครื่องหมายเซมิโคลอนหลัง `alert` ออกดู:

```js run no-beautify
alert("Hello")

[1, 2].forEach(alert);
```

ความแตกต่างกับโค้ดด้านบนอยู่แค่หนึ่งตัวอักษร: คือเซมิโคลอนที่สิ้นสุดบรรทัดแรกหายไป

หากเรารันโค้ดนี้ จะแสดงเฉพาะ `Hello` (เกิดข้อผิดพลาด คุณอาจต้องเปิดคอนโซลเพื่อดู) และไม่ได้แสดงตัวเลขอีกต่อไป

เนื่องจาก JavaScript ไม่ได้แทรกเซมิโคลอนไว้ก่อนวงเล็บเหลี่ยม `[...]` ดังนั้นโค้ดในตัวอย่างได้ถูกรวบเป็นคำสั่งเดียว

นี่คือวิธีที่ JavaScript เห็นโค้ดนี้:

```js run no-beautify
alert("Hello")[1, 2].forEach(alert);
```

ดูแปลกใช่ไหม? การรวบเป็นคำสั่งเดียวทำให้โค้ดทำงานผิดพลาด เราจึงต้องต้องใส่เครื่องหมายเซมิโคลอนหลัง `alert` เพื่อให้โค้ดทำงานได้อย่างถูกต้อง

สถานการณ์แบบนี้อาจเกิดขึ้นในสถานการณ์อื่น ๆ ด้วย
````

เราขอแนะนำให้ใส่เครื่องหมายเซมิโคลอนระหว่างคำสั่ง แม้ว่าคำสั่งจะแยกกันด้วยเว้นบรรทัด กฎนี้ได้รับการใช้งานกันอย่างแพร่หลายในชุมชนนักพัฒนา เราสามารถเขียนโดยไม่ใส่เซมิโคลอนไว้เลยก็ได้  แต่การใช้เครื่องหมายเซมิโคลอนเป็นวิถีทางที่ปลอดภัย - โดยเฉพาะสำหรับผู้เริ่มต้น

## คอมเม้นต์ [#code-comments]

เมื่อเวลาผ่านไป โปรแกรมจะซับซ้อนมากขึ้น จึงเป็นเรื่องจำเป็นที่จะต้องเพิ่ม คอมเมนต์ เพื่ออธิบายว่าโค้ดทำอะไรและทำไมถึงทำเช่นนั้น

คอมเมนต์สามารถใส่ได้ที่ใดก็ได้ในสคริปต์ คอมเมนต์ไม่มีผลต่อการทำงานของสคริปต์เพราะคอมพิวเตอร์จะไม่สนใจมัน

**คอมเมนต์หนึ่งบรรทัดเริ่มต้นด้วยเครื่องหมายทวิสัย (forward slash) สองตัว `//`.**

จะให้ทั้งบรรทัดเป็นคอมเมนต์ หรือเพียงส่วนหนึ่งของบรรทัดก็ได้

เช่น:
```js run
// คอมเม้นต์ทั้งบรรทัด
alert('Hello');

alert('World'); // คอมเม้นต์หลังคำสั่ง
```

**คอมเมนต์หลายบรรทัดเริ่มต้นด้วยเครื่องหมายทวิสัยและดอกจัน <code>/&#42;</code> และจบด้วยดอกจันและเครื่องหมายทวิสัย <code>&#42;/</code>.**

เช่นนี้:

```js run
/* ตัวอย่างกับข้อความสองอัน
นี่คือคอมเมนต์หลายบรรทัด
*/
alert('Hello');
alert('World');
```

เนื้อหาภายในคอมเม้นต์จะถูกละเว้น ดังนั้นหากเราวางโค้ดในระหว่าง <code>/&#42; ... &#42;/</code> โค้ดนั้นจะไม่ทำงาน

บางครั้งเราก็ใช้คอมเม้นต์เพื่อปิดการทำงานของโค้ดไว้ชั่วคราว

```js run
/* ปิดการใช้งานโค้ด
alert('Hello');
*/
alert('World');
```

```smart header="ใช้คีย์ลัด!"
ในเอดิเตอร์ส่วนมาก สามารถคอมเมนต์บรรทัดหนึ่งโดยกดปุ่มลัด `key:Ctrl+/` และสำหรับคอมเมนต์หลายบรรทัด ใช้ `key:Ctrl+Shift+/` -- สำหรับ Mac จะใช้ `key:Cmd` แทน `key:Ctrl` และ `key:Option` แทน `key:Shift`
```

````warn header="ไม่รองรับคอมเม้นต์ซ้อนกัน"
เราไม่สามารถใช้ `/*...*/` ภายในอีก `/*...*/` หนึ่งได้

โค้ดเช่นนี้จะเกิดข้อผิดพลาด:

```js run no-beautify
/*
  /* คอมเมนต์ซ้อนกัน ?!? */
*/
alert( 'World' );
```
````

อย่าลังเลที่จะคอมเม้นโค้ดของเรา

คอมเมนต์เพิ่มขนาดของโต้ดโดยรวม แต่ไม่ใช่ปัญหา เพราะมีเครื่องมือมากมายที่สามารถเอาคอมเม้นต์ออกได้ก่อนเผยแพร่โค้ดออกสู่สาธารณะ ดังนั้นคอมเม้นต์จึงไม่มีผลต่อการทำงานของโค้ดเลย

ในบทสอนที่ถัดไปจะมีบทเรียนเกี่ยวกับ <info:code-quality> อธิบายว่าเราจะเขียนคอมเม้นต์ที่ดีได้อย่างไร