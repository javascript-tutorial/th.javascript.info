# ความพิเศษของ JavaScript

บทนี้จะสรุปย่อคุณลักษณะของ JavaScript ที่เราได้เรียนมาจนถึงตอนนี้ โดยให้ความสนใจเป็นพิเศษกับจุดละเอียดอ่อน

## โครงสร้างโค้ด

คำสั่งจะถูกคั่นด้วยเครื่องหมายอัฒภาค (semicolon):

```js run no-beautify
alert('Hello'); alert('World');
```

โดยทั่วไปแล้ว การขึ้นบรรทัดใหม่ก็ถือเป็นตัวคั่นเช่นกัน ดังนั้นแบบนี้ก็ใช้ได้เช่นกัน:

```js run no-beautify
alert('Hello')
alert('World')
```

เรียกว่า "การแทรกเครื่องหมายอัฒภาคอัตโนมัติ" แต่บางครั้งก็ไม่ทำงาน ยกตัวอย่างเช่น:

```js run
alert("There will be an error after this message")

[1, 2].forEach(alert)
```

คู่มือรูปแบบการเขียนโค้ดส่วนใหญ่เห็นพ้องกันว่า เราควรใส่เครื่องหมายอัฒภาคหลังแต่ละคำสั่ง

ไม่จำเป็นต้องใช้เครื่องหมายอัฒภาคหลังบล็อกโค้ด `{...}` และโครงสร้างทางไวยากรณ์ที่มีบล็อกเหล่านั้น เช่น ลูป:

```js
function f() {
  // ไม่ต้องใส่เครื่องหมายอัฒภาคหลังการประกาศฟังก์ชัน
}

for(;;) {
  // ไม่ต้องใส่เครื่องหมายอัฒภาคหลังลูป
}
```

...แต่แม้ว่าเราจะใส่เครื่องหมายอัฒภาค "เพิ่มเติม" ไว้ที่ใดสักแห่ง ก็ไม่ถือเป็นข้อผิดพลาด มันจะถูกละเว้น

อ่านเพิ่มเติมได้ที่: <info:structure>

## โหมดเข้มงวด (Strict mode)

เพื่อเปิดใช้งานคุณลักษณะทั้งหมดของ JavaScript สมัยใหม่อย่างเต็มที่ เราควรเริ่มต้นสคริปต์ด้วย `"use strict"`

```js
'use strict';

...
```

คำสั่งนี้จะต้องอยู่ที่ด้านบนสุดของสคริปต์ หรือที่จุดเริ่มต้นของ function body

หากไม่มี `"use strict"` ทุกอย่างก็ยังคงทำงานได้ แต่คุณลักษณะบางอย่างจะทำงานในแบบเก่าๆ "แบบเข้ากันได้" โดยทั่วไปเรามักจะต้องการพฤติกรรมแบบสมัยใหม่มากกว่า

คุณลักษณะสมัยใหม่บางอย่างของภาษา (เช่น คลาส ซึ่งเราจะศึกษาในอนาคต) จะเปิดใช้งานโหมดเข้มงวดโดยอัตโนมัติ 

อ่านเพิ่มเติมได้ที่: <info:strict-mode>

## ตัวแปร

สามารถประกาศตัวแปรได้โดยใช้:

- `let`
- `const` (ค่าคงที่ ไม่สามารถเปลี่ยนแปลงได้)
- `var` (แบบเก่า จะได้เห็นในภายหลัง)

ชื่อตัวแปรสามารถประกอบด้วย:
- ตัวอักษรและตัวเลข แต่ตัวแรกจะต้องไม่ใช่ตัวเลข
- อักขระ `$` และ `_` เป็นอักขระปกติ เทียบเท่ากับตัวอักษร
- ตัวอักษรที่ไม่ใช่ละตินและอักษรอียิปต์โบราณก็สามารถใช้ได้ แต่ไม่ค่อยนิยมใช้

ตัวแปรมีการกำหนดชนิดข้อมูลแบบไดนามิก สามารถเก็บค่าใดๆ ก็ได้:

```js
let x = 5;
x = "John";
```

มีชนิดข้อมูลทั้งหมด 8 ชนิด:

- `number` สำหรับตัวเลขทั้งจำนวนจริงและจำนวนเต็ม
- `bigint` สำหรับจำนวนเต็มที่มีความยาวตามต้องการ
- `string` สำหรับข้อความ
- `boolean` สำหรับค่าตรรกะ: `true/false`
- `null` -- ชนิดข้อมูลที่มีค่าเดียวคือ `null` หมายถึง "ว่างเปล่า" หรือ "ไม่มีอยู่"
- `undefined` -- ชนิดข้อมูลที่มีค่าเดียวคือ `undefined` หมายถึง "ยังไม่ได้กำหนดค่า"
- `object` และ `symbol` -- สำหรับโครงสร้างข้อมูลที่ซับซ้อน และตัวระบุที่ไม่ซ้ำกัน เรายังไม่ได้เรียนรู้เกี่ยวกับสิ่งเหล่านี้

ตัวดำเนินการ `typeof` จะคืนค่าชนิดข้อมูลของค่านั้นๆ โดยมีข้อยกเว้นสองกรณี:
```js
typeof null == "object" // ข้อผิดพลาดในภาษา
typeof function(){} == "function" // ฟังก์ชันจะถูกจัดการเป็นพิเศษ
```

อ่านเพิ่มเติมได้ที่: <info:variables> และ <info:types>

## การโต้ตอบ

เนื่องจากเรากำลังใช้เบราว์เซอร์เป็นสภาพแวดล้อมในการทำงาน ฟังก์ชัน UI พื้นฐานจึงประกอบด้วย:

[`prompt(question, [default])`](https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt)
: ถาม `question` และคืนค่าสิ่งที่ผู้ใช้ป้อนเข้ามา หรือ `null` หากผู้ใช้คลิก "ยกเลิก"

[`confirm(question)`](https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm)
: ถาม `question` และแนะนำให้เลือกระหว่าง ตกลง และ ยกเลิก ทางเลือกจะถูกส่งคืนเป็น `true/false`

[`alert(message)`](https://developer.mozilla.org/en-US/docs/Web/API/Window/alert)
: แสดงผล `message`

ฟังก์ชันเหล่านี้ทั้งหมดเป็นแบบ *modal* หมายความว่าจะหยุดการทำงานของโค้ด และป้องกันไม่ให้ผู้ใช้โต้ตอบกับหน้าเว็บจนกว่าจะตอบคำถาม

ตัวอย่างเช่น:

```js run
let userName = prompt("Your name?", "Alice");
let isTeaWanted = confirm("Do you want some tea?");

alert( "Visitor: " + userName ); // Alice
alert( "Tea wanted: " + isTeaWanted ); // true
```

อ่านเพิ่มเติมได้ที่: <info:alert-prompt-confirm>

ขอทบทวนและแก้ไขเล็กน้อยนะครับ

## ตัวดำเนินการ (Operators)

JavaScript รองรับตัวดำเนินการดังต่อไปนี้:

ทางคณิตศาสตร์
: ปกติ: `* + - /` รวมถึง `%` สำหรับการหารเอาเศษ และ `**` สำหรับการยกกำลัง

    ตัวดำเนินการบวก `+` แบบสองตัวถูกกระทำจะเชื่อมต่อสตริง และถ้าตัวใดตัวหนึ่งเป็นสตริง อีกตัวก็จะถูกแปลงเป็นสตริงด้วยเช่นกัน:

    ```js run
    alert( '1' + 2 ); // '12', string
    alert( 1 + '2' ); // '12', string
    ```

การกำหนดค่า
: มีการกำหนดค่าธรรมดา: `a = b` และแบบรวมต่างๆ เช่น `a *= 2`

การดำเนินการระดับบิต  
: ตัวดำเนินการระดับบิตจะทำงานกับจำนวนเต็ม 32 บิตที่ระดับบิตต่ำสุด: ดูที่ [docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#bitwise_operators) เมื่อต้องการ

แบบมีเงื่อนไข
: ตัวดำเนินการเพียงตัวเดียวที่มีสามพารามิเตอร์: `cond ? resultA : resultB` ถ้า `cond` เป็น truthy จะคืนค่า `resultA` ไม่เช่นนั้นจะคืน `resultB`

ตัวดำเนินการทางตรรกะ
: AND ตรรกะ `&&` และ OR ตรรกะ `||` จะทำการประเมินแบบลัดวงจรและคืนค่าที่มันหยุด (ไม่จำเป็นต้องเป็น `true/false`) NOT ตรรกะ `!` แปลงตัวถูกกระทำเป็น boolean และคืนค่าตรงข้าม

ตัวดำเนินการ Nullish coalescing  
: ตัวดำเนินการ `??` ให้วิธีเลือกค่าที่ถูกกำหนดจากรายการตัวแปร ผลลัพธ์ของ `a ?? b` คือ `a` เว้นแต่มันจะเป็น `null/undefined` จึงจะเป็น `b`

การเปรียบเทียบ
: การตรวจสอบความเท่ากัน `==` สำหรับค่าที่มีชนิดต่างกันจะแปลงเป็นตัวเลข (ยกเว้น `null` และ `undefined` ซึ่งเท่ากันและไม่เท่ากับอะไรอื่น) ดังนั้นพวกนี้จึงเท่ากัน:

    ```js run
    alert( 0 == false ); // true
    alert( 0 == '' ); // true
    ```

    การเปรียบเทียบอื่นๆ ก็จะแปลงเป็นตัวเลขด้วยเช่นกัน

    ตัวดำเนินการเปรียบเทียบความเท่ากันแบบเข้มงวด `===` จะไม่แปลงค่า: ชนิดที่ต่างกันเสมอไปจะถือว่าค่าไม่เท่ากัน

    ค่า `null` และ `undefined` เป็นพิเศษ: พวกมันเท่ากับ `==` กันเองและไม่เท่ากับอะไรอื่น

    การเปรียบเทียบมากกว่า/น้อยกว่าจะเปรียบเทียบสตริงทีละอักขระ ส่วนชนิดอื่นจะแปลงเป็นตัวเลข

ตัวดำเนินการอื่นๆ
: มีอีกไม่กี่ตัว เช่น comma operator

อ่านเพิ่มเติมได้ที่: <info:operators>, <info:comparison>, <info:logical-operators>, <info:nullish-coalescing-operator>