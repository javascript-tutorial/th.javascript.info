# โหมดใหม่ "use strict"

เป็นเวลานานแล้วที่จาวาสคริปต์ออกฟีเจอร์ใหม่ๆโดยไม่มีปัญหาเรื่องความเข้ากันได้ (Compatibility) ถึงจะมีฟีเจอร์ใหม่ๆ แต่ฟีเจอร์เดิมๆก็ยังคงทำงานได้อยู่นั่นเอง

ข้อดีก็คือโค้ดของเรากับโค้ดเมื่อสิบปีที่แล้วก็สามารถทำงานร่วมกันได้ แต่มันมีข้อเสียเพราะตัวผู้สร้างภาษาเอง ก็ดันไปสร้างบาปกำเนิดกับจาวาสคริปต์ด้วย โดยไม่รู้ตัว ดังนั้นเมื่อการหักกับฟีเจอร์เก่าๆแล้ว บาปกำเนิดของจาวาสคริปต์ จึงกลายเป็นคำสาป ชำระล้างไม่ได้ไปตลอดกาล

จนเวลาล่วงเลยมาถึงปี 2009 มาตรฐานภาษาชุดใหม่เปิดตัว มันคือ ECMAScript5 ที่เพิ่มทั้งฟีเจอร์ใหม่ รวมถึงไปโมฟีเจอร์เก่าๆบางตัวด้วย ผลก็คือ `แหก` นั่นเอง แต่ทางผู้สร้างมาตรฐานชุดนี้ตระหนักในเรื่องนี้ดี เพื่อให้โค้ดเก่าๆทำงานได้ พวกเขาจึงได้ปิดฟีเจอร์โมภาษานี้ไป แต่เราสามารถเปิดตัวโมนี้ได้ผ่านคำสั่ง `"use strict"`

## "use strict"

ตัวคำสั่งหน้าตาเหมือนสตริง `"use strict"` หรือ `'use strict'` แต่คำสั่นี้จะต้องอยู่บนสุดของสคริปต์คือบรรทัดที่หนึ่ง ทีนี้สคริปต์ทั้งหมดของเราก็ทำงานแบบ "สมัยใหม่ (modern)"

ดั่งตัวอย่าง:

```js
"use strict";

// โค้ดที่เขียนต่อจากนี้จะทำงานแบบจาวาสคริปต์สมัยใหม่
...
```

เราจะเรียนรู้เรื่องฟังก์ชั่น (วิธีการจัดกลุ่มคำสั่ง) ในไม่ช้า แต่อยากบอก `"use strict"` สามารถวางไว้ที่บรรทัดเริ่มต้นของฟังก์ชั่นได้ แทนที่จะเป็นทั้งไฟล์ ตามแบบนี้ก็เพื่อจะใช้โหมด `"use strict"` แค่ในฟังก์ชั่นนี้เท่านั้น แต่ปกติแล้ว นิยมวางไว้บรรทัดแรกมากกว่า


````warn header="อย่าลืมว่า \"use strict\" ต้องอยู่บรรทัดแรกเสมอ"
อย่าลืมว่า `"use strict"` ต้องอยู่บรรทัดแรกของไฟล์สคริปต์เสมอ ไม่อย่างนั้นโหมดนี้จะไม่ทำงาน

เช่นตัวอย่างด้านล่าง

```js no-strict
alert("some code");
// ตัวเอนจินจะไม่สนใจ "use strict" ด้านล่าง โหมดนี้จึงไม่ได้ถูกทำงาน

"use strict";

// strict mode จะไม่ทำงาน
```

หากมีคอมเม้นอยู่เหนือ "use strict" ตัวของ "use strict" ก็จะทำปกติ
````

```warn header="ไม่มีทางยกเลิกโหมด `use strict` ได้"
มันไม่มีคำสั่งอย่าง "no use strict" เพื่อได้เอนจินกลับไปทำงานในโหมดเดิมได้

<<<<<<< HEAD
ดังนั้นเมื่อเราเปิดโหมด `use strict` แล้ว เราก็ไม่มีทางปิดมันได้
=======
Once we enter strict mode, there's no going back.
>>>>>>> 524d59884650be539544c34f71d821432b7280fd
```

## คอนโซลบนเบราเซอร์

หากเราต้องการทดสอบฟีเจอร์อะไรบางอย่างบนคอนโซลของเบราเซอร์ โปรดจงคุณไว้ว่าคอนโซลบนเบราเซอร์ปิดโหมด `use strict` เอาไว้

ดังนั้นในบางครั้งระหว่างโหมด `use strict` กับที่ไม่ใช่ ก็จะได้ผลลัพธ์ที่แตกต่างกัน

เราสามารถลองดูได้โดยกดปุ่ม `key:Shift+Enter` เพื่อป้อนข้อความหลายบรรทัด และอย่าลืมใส่ `use strict` ไว้บนสุดทุกครั้ง, แบบนี้:

```js
'use strict'; <Shift+Enter for a newline>
//  ...โค้ดของเรา
<กด Enter เพื่อให้โค้ดทำงาน>
```

ฟีเจอร์นี้รับรองบนเบราเซอร์ส่วนใหญ่แล้วอย่าง Chrome และ Firefox

หากไม่แน่ใจว่า เบราเซอร์ที่เราใช้นั้นสามารถใช้โหมดนี้ได้หรือเปล่า โค้ดข้างล่างคือโค้ดที่เอาไว้ตรวจสอบว่า เบราเซฮร์ดังกล่าวสามารถใช้โหมดนี้ได้

```js
(function() {
  'use strict';

  // ...your code...
})()
```

## เปิดโหมด "use strict" ไว้เสมอ

อันที่จริงเราก็ยังไม่ได้บอกข้อแตกต่างของโหมด "use strict" กับโหมดปกติไว้เลย

ในบทถัดไป เราจะมาเรียนรู้ฟีเจอร์ของภาษานี้กัน เราจะได้เห็นความแตกต่างระหว่างสองโหมดบ้างต้น ความโชคดีอย่างแรกคือความแตกต่างมีเพียงเล็กน้อย ซึ่งง่ายต่อการจำจด อย่างที่สองคือมันจะทำให้ชีวิตของเราง่ายขึ้นในพริบตา

สำหรับตอนนี้แค่นี้ก็พอเพียงแล้ว

1. คำสั่ง `"use strict"` เป็นคำสั่งสำหรับเอนจินยุค ES5 ซึ่งเอาไว้สลับโหมดระหว่างโหมดปกติกับโหมด `"use strict"` เราจะมาพูดถึงรายละเอียดกันอีกทีในบทถัดไป
2. เปิด strict โหมดง่ายๆเพียงแค่ใส่ `"use strict"` ไว้บนสุดของสคริปต์หรือฟังชั่นก์ เมื่อเอนจินอ่านเจอมันจะเปิดโหมดนี้โดยอัตโนมัติ
3. โมเดิร์นเบราเซอร์ รองรับโหมด strict ทั้งหมดแล้ว
4. แนะนำว่าควรเปิด strict โหมดไว้เสมอ
