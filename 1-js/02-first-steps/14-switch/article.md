# คำสั่ง "switch"

คำสั่ง `switch` สามารถใช้แทนการตรวจสอบด้วย `if` หลายๆ ครั้งได้

มันให้วิธีเปรียบเทียบค่ากับตัวเลือกหลายๆ ตัวอย่างเข้าใจง่ายกว่า

## ไวยากรณ์

`switch` จะมีหนึ่งหรือหลายบล็อก `case` และมี `default` เป็นตัวเลือกเสริม

มีรูปแบบดังนี้:

```js no-beautify
switch(x) {
  case 'value1':  // ถ้า (x === 'value1')
    ...
    [break]

  case 'value2':  // ถ้า (x === 'value2')
    ...
    [break]

  default:
    ...
    [break]
}
```

- ค่าของ `x` จะถูกตรวจสอบความเท่าเทียมกันอย่างเข้มงวดกับค่าจาก `case` แรก (คือ `value1`) จากนั้นเป็น `case` ที่สอง (`value2`) และต่อไปเรื่อยๆ
- ถ้าพบความเท่ากัน `switch` จะเริ่มรันโค้ดจาก `case` ที่ตรงกัน จนกว่าจะเจอ `break` ที่ใกล้ที่สุด (หรือจนจบ `switch`)
- ถ้าไม่ตรงกับ `case` ใด โค้ดใน `default` จะถูกรัน (ถ้ามี)

## ตัวอย่าง

ตัวอย่างของ `switch` (โค้ดที่ถูกรันจะเน้นให้เห็น):

```js run
let a = 2 + 2;

switch (a) {
  case 3:
    alert( 'เล็กไป' );
    break;
*!*
  case 4:
    alert( 'ถูกต้อง!' );
    break;
*/!*
  case 5:
    alert( 'ใหญ่ไป' );
    break;
  default:
    alert( "ไม่รู้จักค่านี้" );
}
```

ที่นี่ `switch` จะเริ่มเปรียบเทียบ `a` กับ `case` แรกคือ `3` ซึ่งไม่ตรงกัน

จากนั้นเป็น `4` ซึ่งตรงกัน ดังนั้นโค้ดจะเริ่มรันจาก `case 4` จนกว่าจะเจอ `break`

**ถ้าไม่มี `break` โค้ดจะรันต่อไปยัง `case` ถัดไปเลยโดยไม่ตรวจสอบอะไร**  

ตัวอย่างที่ไม่มี `break`:

```js run
let a = 2 + 2;

switch (a) {
  case 3:
    alert( 'เล็กไป' );
*!*
  case 4:
    alert( 'ถูกต้อง!' );
  case 5:
    alert( 'ใหญ่ไป' );
  default:  
    alert( "ไม่รู้จักค่านี้" );
*/!*
}
```

ในตัวอย่างข้างบน จะเห็น `alert` สามอันทำงานต่อเนื่องกัน:

```js
alert( 'ถูกต้อง!' );
alert( 'ใหญ่ไป' );
alert( "ไม่รู้จักค่านี้" );  
```

````smart header="นิพจน์อะไรก็ใช้เป็นอาร์กิวเมนต์ของ `switch/case` ได้"
ทั้ง `switch` และ `case` สามารถใช้นิพจน์อะไรก็ได้

เช่น:

```js run
let a = "1";
let b = 0;

switch (+a) {
*!*
  case b + 1:
    alert("นี่ทำงาน เพราะ +a เป็น 1 ซึ่งเท่ากับ b+1");
    break;
*/!*

  default:
    alert("นี่ไม่ทำงาน");
}
```
ที่นี่ `+a` ให้ค่า `1` ซึ่งจะถูกเปรียบเทียบกับ `b + 1` ใน `case` และโค้ดที่สอดคล้องจะถูกรัน
````

## การจัดกลุ่ม "case"

`case` หลายๆ แบบที่รันโค้ดเดียวกัน สามารถจัดกลุ่มรวมกันได้

ตัวอย่างเช่น ถ้าเราต้องการให้โค้ดเดียวกันทำงานทั้งใน `case 3` และ `case 5`:

```js run no-beautify
let a = 3;

switch (a) {
  case 4:
    alert('ถูกต้อง!');
    break;

*!*
  case 3: // (*) จัดกลุ่มสอง case ไว้ด้วยกัน
  case 5:
    alert('ผิด!');
    alert("ลองไปเรียนคณิตหน่อยไหม");
    break;
*/!*

  default:
    alert('ผลลัพธ์แปลกมากเลย');
}
```

ตอนนี้ทั้ง `3` และ `5` จะแสดงข้อความเดียวกัน

ความสามารถในการ "จัดกลุ่ม" `case` เป็นผลข้างเคียงของวิธีการทำงานของ `switch/case` เมื่อไม่มี `break` ในที่นี้ `case 3` จะเริ่มรันโค้ดจากบรรทัด `(*)` และรันผ่าน `case 5` ไปเลย เพราะไม่มี `break`

## ชนิดข้อมูลมีความสำคัญ

ขอเน้นว่าการตรวจสอบความเท่ากันจะเป็นแบบเข้มงวดเสมอ ค่าต้องเป็นชนิดเดียวกันจึงจะตรงกัน

ตัวอย่างเช่น ลองพิจารณาโค้ดนี้:

```js run
let arg = prompt("ใส่ค่ามา");
switch (arg) {
  case '0':
  case '1':
    alert( 'ศูนย์หรือหนึ่ง' );
    break;

  case '2':
    alert( 'สอง' );
    break;

  case 3:
    alert( 'จะไม่มีทางรันเลย!' );  
    break;
  default:
    alert( 'ค่าที่ไม่รู้จัก' );
}
```

1. สำหรับ `0`, `1` จะแสดง `alert` แรก
2. สำหรับ `2` จะแสดง `alert` ที่สอง
3. แต่สำหรับ `3` ผลลัพธ์จาก `prompt` จะเป็น string `"3"` ซึ่งไม่เท่ากันอย่างเข้มงวด `===` กับตัวเลข `3` ดังนั้นเราจะมีโค้ดที่ไม่มีทางรันได้ใน `case 3`! แต่ `default` จะถูกรันแทน