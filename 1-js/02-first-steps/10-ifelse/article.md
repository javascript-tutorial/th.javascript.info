# การกระโดดแบบมีเงื่อนไข: if, '?'

บ่อยครั้งที่เราต้องทำการต่างๆ ตามเงื่อนไขที่แตกต่างกัน

เพื่อทำเช่นนั้น เราสามารถใช้คำสั่ง `if` และตัวดำเนินการแบบมีเงื่อนไข `?` ซึ่งมีอีกชื่อหนึ่งว่า "เครื่องหมายคำถาม"

## คำสั่ง "if"

คำสั่ง `if(...)` จะประเมินเงื่อนไขในวงเล็บ ถ้าผลลัพธ์เป็น `true` จะดำเนินการโค้ดในบล็อก

ตัวอย่างเช่น:

```js run
let year = prompt('มาตรฐาน ECMAScript-2015 เผยแพร่ในปีใด?', '');

*!*
if (year == 2015) alert('คุณตอบถูก!');
*/!*
```

ในตัวอย่างข้างต้น เงื่อนไขคือการตรวจสอบความเท่ากันแบบง่าย (`year == 2015`) แต่มันอาจซับซ้อนกว่านั้นได้มาก

ถ้าเราต้องการรันคำสั่งมากกว่าหนึ่งคำสั่ง เราต้องครอบโค้ดของเราด้วยวงเล็บปีกกา:

```js
if (year == 2015) {
  alert("ถูกต้อง!");
  alert("คุณเก่งมาก!");
}  
```

แนะนำให้ครอบโค้ดของคุณด้วยวงเล็บปีกกา `{}` ทุกครั้งที่ใช้คำสั่ง `if` แม้จะมีเพียงหนึ่งคำสั่งก็ตาม การทำเช่นนี้ช่วยให้อ่านโค้ดง่ายขึ้น 

## การแปลงเป็น boolean 

คำสั่ง `if(...)` จะประเมินนิพจน์ในวงเล็บและแปลงผลลัพธ์เป็น boolean

ลองมาทบทวนกฎการแปลงประเภทจากบท <info:type-conversions> กัน:

- ตัวเลข `0`, string ว่าง `""`, `null`, `undefined` และ `NaN` จะกลายเป็น `false` ทั้งหมด เรียกค่าเหล่านี้ว่า "falsy"
- ค่าอื่นๆ จะกลายเป็น `true` เรียกว่า "truthy"

ดังนั้น โค้ดภายใต้เงื่อนไขนี้จะไม่ถูกรัน:

```js
if (0) { // 0 เป็น falsy
  ...
}
```

...แต่ภายในเงื่อนไขนี้ จะรันเสมอ:

```js
if (1) { // 1 เป็น truthy
  ...
}
```

เรายังสามารถส่งค่า boolean ที่ประเมินไว้แล้วเข้าไปใน `if` ได้ด้วย แบบนี้:

```js  
let cond = (year == 2015); // ตรวจสอบความเท่ากัน ได้ค่า true หรือ false

if (cond) {
  ... 
}
```

## กรณี "else"

คำสั่ง `if` อาจมีบล็อก `else` เพิ่มเติมได้ ซึ่งจะทำงานเมื่อเงื่อนไขเป็น falsy (เท็จ)

ตัวอย่างเช่น:
```js run
let year = prompt('ECMAScript-2015 เผยแพร่ในปีใด?', '');

if (year == 2015) {
  alert('คุณตอบถูกต้อง!');
} else {
  alert('คุณจำผิดแล้ว'); // สำหรับค่าอื่นๆ ที่ไม่ใช่ 2015
}
```

## หลายเงื่อนไข: "else if"

บางครั้งเราอยากทดสอบเงื่อนไขหลายรูปแบบ กรณี `else if` ช่วยให้เราทำแบบนั้นได้

ตัวอย่างเช่น:

```js run
let year = prompt('ECMAScript-2015 เผยแพร่ในปีใด?', '');

if (year < 2015) {
  alert('เร็วไป...');
} else if (year > 2015) {
  alert('ช้าไป');  
} else {
  alert('ถูกต้อง!');
}
```

ในโค้ดข้างต้น JavaScript จะตรวจสอบ `year < 2015` ก่อน ถ้าเป็น falsy จะไปเช็คเงื่อนไขถัดไปคือ `year > 2015` ถ้านั่นก็เป็น falsy ก็จะแสดง `alert` สุดท้าย

เราสามารถมีบล็อก `else if` ได้หลายบล็อก ส่วน `else` ตัวสุดท้ายเป็นตัวเลือกเสริม ไม่บังคับ

## ตัวดำเนินการแบบมีเงื่อนไข '?'

บางครั้งเราต้องการกำหนดค่าให้ตัวแปรตามเงื่อนไขบางอย่าง

ยกตัวอย่างเช่น:

```js run no-beautify
let accessAllowed;
let age = prompt('อายุเท่าไหร่?', '');

*!*
if (age > 18) {
  accessAllowed = true;
} else {
  accessAllowed = false;  
}
*/!*

alert(accessAllowed);
```

ตัวดำเนินการที่เรียกว่า "แบบมีเงื่อนไข" หรือ "เครื่องหมายคำถาม" ช่วยให้เราเขียนโค้ดแบบนี้ได้สั้นและง่ายขึ้น

ตัวดำเนินการนี้แทนด้วยเครื่องหมายคำถาม `?` บางครั้งเรียกว่า "ternary" เพราะมี 3 operand ซึ่งเป็นตัวดำเนินการเดียวใน JavaScript ที่มีจำนวน operand มากขนาดนี้

รูปแบบไวยากรณ์คือ:
```js
let result = condition ? value1 : value2;
```

`condition` จะถูกประเมิน ถ้าเป็น truthy จะคืนค่า `value1` ไม่อย่างนั้นจะคืนค่า `value2`

ตัวอย่างเช่น:

```js
let accessAllowed = (age > 18) ? true : false;
```

ในทางเทคนิค เราสามารถละวงเล็บรอบ `age > 18` ได้ เพราะตัวดำเนินการ ? มีลำดับความสำคัญต่ำกว่า (precedence) จึงรันหลังเครื่องหมาย `>` 

ตัวอย่างนี้จะทำงานเหมือนกับตัวอย่างก่อนหน้า:

```js
// การเปรียบเทียบ "age > 18" รันก่อนอยู่แล้ว
// (ไม่ต้องครอบด้วยวงเล็บก็ได้)
let accessAllowed = age > 18 ? true : false;
```

แต่การใส่วงเล็บช่วยให้โค้ดอ่านง่ายขึ้น จึงแนะนำให้ใส่ไว้

````smart
ในตัวอย่างข้างต้น จริงๆ แล้วไม่จำเป็นต้องใช้ ? ก็ได้นะ เพราะการเปรียบเทียบเองให้ค่า `true/false` อยู่แล้ว:

```js
// เหมือนกัน
let accessAllowed = age > 18;
``` 
````

## เครื่องหมายคำถามหลายตัว '?'

การใช้เครื่องหมายคำถาม `?` ต่อเนื่องกันหลายตัว สามารถคืนค่าที่ขึ้นอยู่กับเงื่อนไขมากกว่าหนึ่งอย่างได้

ตัวอย่างเช่น:
```js run
let age = prompt('อายุเท่าไหร่?', 18);

let message = (age < 3) ? 'สวัสดีจ้าหนู!' :
  (age < 18) ? 'สวัสดีจ้า!' :
  (age < 100) ? 'สวัสดีครับ/ค่ะ!' : 
  'อายุแปลกๆ นะ!';

alert( message );  
```

อาจดูงงในตอนแรกว่าเกิดอะไรขึ้น แต่ถ้ามองให้ดี จะเห็นว่ามันเป็นเพียงการทดสอบเงื่อนไขทีละข้อตามลำดับ:

1. `?` ตัวแรกตรวจสอบว่า `age < 3` หรือไม่
2. ถ้าใช่ -- คืนค่า `'สวัสดีจ้าหนู!'` ถ้าไม่ใช่ มันจะไปเช็คเงื่อนไขถัดจากโคลอน ":" คือ `age < 18`
3. ถ้าเงื่อนไขนั้นเป็นจริง -- คืนค่า `'สวัสดีจ้า!'` ถ้าไม่จริง ก็จะไปเช็คเงื่อนไขถัดจากโคลอนถัดไป ":" คือ `age < 100`
4. ถ้านั่นเป็นจริง -- คืนค่า `'สวัสดีครับ/ค่ะ!'` ไม่อย่างนั้นจะไปที่เงื่อนไขสุดท้ายหลังโคลอนตัวสุดท้าย ":" และคืนค่า `'อายุแปลกๆ นะ!'`

นี่คือการเขียนโค้ดข้างต้นโดยใช้ `if..else`:

```js
if (age < 3) {
  message = 'สวัสดีจ้าหนู!';
} else if (age < 18) {
  message = 'สวัสดีจ้า!';  
} else if (age < 100) {
  message = 'สวัสดีครับ/ค่ะ!';
} else {
  message = 'อายุแปลกๆ นะ!'; 
}
```