# ตัวเลข

ในภาษา JavaScript สมัยใหม่ มีตัวเลขอยู่สองประเภท:

1. ตัวเลขปกติใน JavaScript จะถูกเก็บในรูปแบบ 64 บิต [IEEE-754](https://en.wikipedia.org/wiki/IEEE_754-2008_revision) ซึ่งเรียกอีกอย่างว่า "จำนวนทศนิยมความแม่นยำสองเท่า" (double precision floating point numbers) ตัวเลขเหล่านี้เป็นตัวเลขที่เราใช้บ่อยที่สุด และเราจะพูดถึงมันในบทนี้

2. ตัวเลข BigInt เพื่อแสดงจำนวนเต็มที่มีความยาวไม่จำกัด บางครั้งจำเป็นต้องใช้เนื่องจากตัวเลขปกติไม่สามารถเกิน <code>2<sup>53</sup></code> หรือน้อยกว่า <code>-2<sup>53</sup></code> ได้อย่างปลอดภัย เนื่องจาก bigints ใช้ในบางพื้นที่พิเศษเท่านั้น เราจึงอุทิศบทพิเศษให้กับมัน <info:bigint>

ดังนั้นในที่นี้เราจะพูดถึงตัวเลขปกติ มาขยายความรู้เกี่ยวกับมันกันเถอะ

## วิธีเขียนตัวเลขเพิ่มเติม

สมมติว่าเราต้องการเขียนตัวเลขหนึ่งพันล้าน วิธีที่เห็นได้ชัดคือ:

```js
let billion = 1000000000;
```

เราสามารถใช้เครื่องหมายขีดล่าง `_` เป็นตัวคั่นได้:

```js
let billion = 1_000_000_000;
```

ในที่นี้ เครื่องหมายขีดล่าง `_` ทำหน้าที่เป็น "น้ำตาลทางไวยากรณ์" (syntactic sugar) ทำให้ตัวเลขอ่านง่ายขึ้น เครื่องยนต์ JavaScript จะละเลย `_` ระหว่างตัวเลข ดังนั้นมันจึงเป็นตัวเลขหนึ่งพันล้านเหมือนกันกับข้างบน

ในชีวิตจริง เราพยายามหลีกเลี่ยงการเขียนเลขศูนย์ต่อกันยาวๆ เราขี้เกียจเกินไป เราจะพยายามเขียนอะไรประมาณ `"1bn"` สำหรับหนึ่งพันล้าน หรือ `"7.3bn"` สำหรับเจ็ดพันสามร้อยล้าน สิ่งเดียวกันนี้เป็นจริงสำหรับตัวเลขขนาดใหญ่ส่วนใหญ่

ใน JavaScript เราสามารถย่อตัวเลขโดยเพิ่มตัวอักษร `"e"` ต่อท้ายและระบุจำนวนศูนย์:

```js run
let billion = 1e9;  // 1 พันล้าน ตามตัวอักษร: 1 และตามด้วยศูนย์ 9 ตัว

alert( 7.3e9 );  // 7.3 พันล้าน (เหมือนกับ 7300000000 หรือ 7_300_000_000)
```

กล่าวอีกนัยหนึ่ง `e` คูณตัวเลขด้วย `1` ตามด้วยจำนวนศูนย์ที่กำหนด

```js
1e3 === 1 * 1000; // e3 หมายถึง *1000
1.23e6 === 1.23 * 1000000; // e6 หมายถึง *1000000
```

ตอนนี้มาเขียนอะไรที่เล็กมากๆ กัน สมมติว่า 1 ไมโครวินาที (หนึ่งในล้านของวินาที):

```js
let mсs = 0.000001;
```

เช่นเดียวกับก่อนหน้านี้ การใช้ `"e"` สามารถช่วยได้ ถ้าเราไม่อยากเขียนศูนย์อย่างชัดเจน เราสามารถพูดเหมือนกันได้ว่า:

```js
let mcs = 1e-6; // ศูนย์หกตัวทางซ้ายของ 1
```

ถ้าเรานับจำนวนศูนย์ใน `0.000001` จะมีศูนย์อยู่ 6 ตัว ดังนั้นจึงเป็น `1e-6` ตามธรรมชาติ

กล่าวอีกนัยหนึ่ง ตัวเลขติดลบหลัง `"e"` หมายถึงการหารด้วย 1 ตามด้วยจำนวนศูนย์ที่กำหนด:

```js
// -3 หารด้วย 1 ตามด้วยศูนย์ 3 ตัว
1e-3 === 1 / 1000; // 0.001

// -6 หารด้วย 1 ตามด้วยศูนย์ 6 ตัว
1.23e-6 === 1.23 / 1000000; // 0.00000123
```

### ตัวเลขฐานสิบหก ฐานสอง และฐานแปด

[ตัวเลขฐานสิบหก](https://en.wikipedia.org/wiki/Hexadecimal) (เลขฐาน 16) ถูกใช้อย่างแพร่หลายใน JavaScript เพื่อแสดงสี เข้ารหัสตัวอักษร และอื่นๆ อีกมากมาย ดังนั้นจึงมีวิธีเขียนที่สั้นกว่า: `0x` แล้วตามด้วยตัวเลข

ตัวอย่างเช่น:

```js run
alert( 0xff ); // 255
alert( 0xFF ); // 255 (เหมือนกัน ตัวพิมพ์เล็กหรือใหญ่ไม่สำคัญ)
```

ระบบตัวเลขฐานสองและฐานแปดใช้น้อย แต่ก็รองรับเช่นกันโดยใช้คำนำหน้า `0b` และ `0o`:


```js run
let a = 0b11111111; // รูปแบบเลขฐานสองของ 255
let b = 0o377; // รูปแบบเลขฐานแปดของ 255

alert( a == b ); // จริง, เป็นตัวเลข 255 เหมือนกันทั้งสองฝั่ง
```

มีเพียง 3 ระบบตัวเลขที่รองรับแบบนี้ สำหรับระบบตัวเลขอื่นๆ เราควรใช้ฟังก์ชัน `parseInt` (ซึ่งเราจะเห็นในภายหลังในบทนี้)

## toString(base)

วิธีการ `num.toString(base)` คืนค่าการแสดงผลเป็นสตริงของ `num` ในระบบตัวเลขที่มีฐานที่กำหนด

ตัวอย่างเช่น:
```js run
let num = 255;

alert( num.toString(16) );  // ff
alert( num.toString(2) );   // 11111111
```

`base` สามารถมีค่าตั้งแต่ `2` ถึง `36` โดยค่าเริ่มต้นคือ `10`

กรณีการใช้งานทั่วไปสำหรับสิ่งนี้คือ:

- **base=16** ใช้สำหรับสีในรูปแบบเลขฐานสิบหก, การเข้ารหัสตัวอักษร ฯลฯ ตัวเลขสามารถเป็น `0..9` หรือ `A..F`
- **base=2** ส่วนใหญ่ใช้สำหรับการแก้ไขข้อผิดพลาดของการดำเนินการระดับบิต ตัวเลขสามารถเป็น `0` หรือ `1`
- **base=36** เป็นค่าสูงสุด ตัวเลขสามารถเป็น `0..9` หรือ `A..Z` ตัวอักษรละตินทั้งหมดถูกใช้เพื่อแสดงตัวเลข กรณีที่สนุกแต่มีประโยชน์สำหรับ `36` คือเมื่อเราต้องการเปลี่ยนตัวระบุตัวเลขที่ยาวให้เป็นอะไรที่สั้นกว่า เช่น เพื่อสร้าง URL สั้น เราสามารถแสดงมันในระบบตัวเลขฐาน `36` ได้ง่ายๆ:

    ```js run
    alert( 123456..toString(36) ); // 2n9c
    ```

```warn header="จุดสองจุดเพื่อเรียกใช้วิธีการ"
โปรดทราบว่าจุดสองจุดใน `123456..toString(36)` ไม่ใช่ข้อผิดพลาดในการพิมพ์ หากเราต้องการเรียกใช้วิธีการโดยตรงกับตัวเลข เช่น `toString` ในตัวอย่างข้างต้น เราต้องวางจุดสองจุด `..` หลังจากนั้น

หากเราวางจุดเดียว: `123456.toString(36)` จะเกิดข้อผิดพลาด เพราะไวยากรณ์ JavaScript บอกว่าส่วนทศนิยมอยู่หลังจุดแรก และถ้าเราวางจุดอีกหนึ่งจุด JavaScript จะรู้ว่าส่วนทศนิยมว่างเปล่าและตอนนี้มาถึงวิธีการแล้ว

เราสามารถเขียน `(123456).toString(36)` ได้เช่นกัน

```

## การปัดเศษ

หนึ่งในการดำเนินการที่ใช้บ่อยที่สุดเมื่อทำงานกับตัวเลขคือการปัดเศษ

มีฟังก์ชันในตัวหลายตัวสำหรับการปัดเศษ:

`Math.floor`
: ปัดลง: `3.1` กลายเป็น `3`, และ `-1.1` กลายเป็น `-2`

`Math.ceil`
: ปัดขึ้น: `3.1` กลายเป็น `4`, และ `-1.1` กลายเป็น `-1`

`Math.round`
: ปัดเศษไปยังจำนวนเต็มที่ใกล้ที่สุด: `3.1` กลายเป็น `3`, `3.6` กลายเป็น `4`, กรณีกึ่งกลาง: `3.5` ปัดขึ้นเป็น `4` เช่นกัน

`Math.trunc` (ไม่รองรับโดย Internet Explorer)
: ลบทุกอย่างหลังจุดทศนิยมโดยไม่ปัดเศษ: `3.1` กลายเป็น `3`, `-1.1` กลายเป็น `-1`

นี่คือตารางสรุปความแตกต่างระหว่างพวกมัน:

|   | `Math.floor` | `Math.ceil` | `Math.round` | `Math.trunc` |
|---|---------|--------|---------|---------|
|`3.1`|  `3`    |   `4`  |    `3`  |   `3`   |
|`3.6`|  `3`    |   `4`  |    `4`  |   `3`   |
|`-1.1`|  `-2`    |   `-1`  |    `-1`  |   `-1`   |
|`-1.6`|  `-2`    |   `-1`  |    `-2`  |   `-1`   |


ฟังก์ชันเหล่านี้ครอบคลุมทุกวิธีที่เป็นไปได้ในการจัดการกับส่วนทศนิยมของตัวเลข แต่ถ้าเราต้องการปัดเศษตัวเลขไปยังตำแ